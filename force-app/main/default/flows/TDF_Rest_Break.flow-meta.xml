<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <assignments>
        <name>assAssign_Status</name>
        <label>Assign Status</label>
        <locationX>18</locationX>
        <locationY>454</locationY>
        <assignmentItems>
            <assignToReference>varStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sobWorkOrder.Status</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>flFast_Lookup_Service_Resource</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assAssign_Term_Reason_Off</name>
        <label>Assign Term Reason Off</label>
        <locationX>745</locationX>
        <locationY>840</locationY>
        <assignmentItems>
            <assignToReference>sobWorkOrder.User_Remark__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fldRest_Break_T_offline</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>flRefresh_SR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assAssign_Termination_Reason</name>
        <label>Assign Termination Reason</label>
        <locationX>583</locationX>
        <locationY>785</locationY>
        <assignmentItems>
            <assignToReference>sobWorkOrder.User_Remark__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fldRest_Break_T</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ruSet_SA_Colour_Red_Terminate</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assAssignCannotCompleteFields</name>
        <label>Assign Cannont Complete Fields</label>
        <locationX>750</locationX>
        <locationY>270</locationY>
        <assignmentItems>
            <assignToReference>sobWorkOrder.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Cannot Complete</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.User_Remark__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>txtReason_for_nc</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Cannot Complete</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobServiceResource.Rest_Break_In_Progress__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.End_Location__Latitude__s</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sobServiceResource.LastKnownLatitude</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.End_Location__Longitude__s</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sobServiceResource.LastKnownLongitude</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.End_Location_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sobServiceResource.LastKnownLocationDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ruSet_SA_Colour_Red_CC</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assEndFields</name>
        <label>Assign End Fields</label>
        <locationX>185</locationX>
        <locationY>960</locationY>
        <assignmentItems>
            <assignToReference>sobWorkOrder.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.End_Location__Latitude__s</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sobServiceResource2.LastKnownLatitude</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.End_Location__Longitude__s</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sobServiceResource2.LastKnownLongitude</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.End_Location_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sobServiceResource2.LastKnownLocationDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobServiceResource.Rest_Break_In_Progress__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>fuSetWOEndFields</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assGet_Start_Time</name>
        <label>Get Start Time</label>
        <locationX>21</locationX>
        <locationY>265</locationY>
        <assignmentItems>
            <assignToReference>dtFlowStart</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>flFast_Lookup_Work_Order</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assStartFields</name>
        <label>Assign Start Fields</label>
        <locationX>655</locationX>
        <locationY>363</locationY>
        <assignmentItems>
            <assignToReference>sobWorkOrder.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>In Progress</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>In Progress</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.Rest_Break_Start_Time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobServiceResource.Rest_Break_In_Progress__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.Start_Location__Latitude__s</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sobServiceResource.LastKnownLatitude</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.Start_Location__Longitude__s</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sobServiceResource.LastKnownLongitude</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sobWorkOrder.Start_Location_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sobServiceResource.LastKnownLocationDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>fuSet_WO_Start_Fields</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>chAssNo</name>
        <choiceText>No</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>N</stringValue>
        </value>
    </choices>
    <choices>
        <name>chAssYes</name>
        <choiceText>Yes</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Y</stringValue>
        </value>
    </choices>
    <choices>
        <name>choConfirm</name>
        <choiceText>Confirm</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Confirm</stringValue>
        </value>
    </choices>
    <choices>
        <name>choContinue_Rest_Break</name>
        <choiceText>Complete rest break</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Continue</stringValue>
        </value>
    </choices>
    <choices>
        <name>choEnd_Rest_Break_Early</name>
        <choiceText>Terminate rest break early</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Terminate</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceCannotComplete</name>
        <choiceText>Cannot complete rest break</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Cannot Complete</stringValue>
        </value>
    </choices>
    <choices>
        <name>choiceStartJob</name>
        <choiceText>Start rest break</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>In Progress</stringValue>
        </value>
    </choices>
    <choices>
        <name>choReEnter</name>
        <choiceText>Re-enter</choiceText>
        <dataType>String</dataType>
    </choices>
    <decisions>
        <name>decCannot_Complete</name>
        <label>Cannot Complete?</label>
        <locationX>506</locationX>
        <locationY>361</locationY>
        <defaultConnector>
            <targetReference>assStartFields</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>N</defaultConnectorLabel>
        <rules>
            <name>outYCC</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>radioSNANew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cannot Complete</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scnReasonFNC</targetReference>
            </connector>
            <label>Y</label>
        </rules>
    </decisions>
    <decisions>
        <name>decContinue_Rest_Break</name>
        <label>Continue Rest Break</label>
        <locationX>381</locationX>
        <locationY>679</locationY>
        <defaultConnector>
            <targetReference>scnReason_for_Termination</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>outYesContinue</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>radioContinueRestBreak</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Continue</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scnRest_Break_In_Prog</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>decCurrentRBe</name>
        <label>Current Rest Break</label>
        <locationX>746</locationX>
        <locationY>964</locationY>
        <defaultConnector>
            <targetReference>ruSet_FFD_RB2_End</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>RB2</defaultConnectorLabel>
        <rules>
            <name>YRB1e</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sobServiceResource.Rest_Break_1_End__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ruSet_FFD_RB1_End</targetReference>
            </connector>
            <label>RB1</label>
        </rules>
    </decisions>
    <decisions>
        <description>If SR Rest Break 1 End is not set then in Rest Break 1, else Rest Break 2. Note that Rest Break 1 is reset on complete of FFD</description>
        <name>decCurrentRBs</name>
        <label>Current Rest Break</label>
        <locationX>957</locationX>
        <locationY>487</locationY>
        <defaultConnector>
            <targetReference>ruSet_FFD_RB2_Start</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>RB2</defaultConnectorLabel>
        <rules>
            <name>outYRB1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sobServiceResource.Rest_Break_1_End__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ruSet_FFD_RB1_Start</targetReference>
            </connector>
            <label>RB1</label>
        </rules>
    </decisions>
    <decisions>
        <name>decRest_Break_Complete</name>
        <label>Rest Break Complete</label>
        <locationX>185</locationX>
        <locationY>681</locationY>
        <defaultConnector>
            <targetReference>decContinue_Rest_Break</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>outYesRBC</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Flow.CurrentDateTime</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>sobWorkOrder.Rest_Break_End_Time_Grace__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>flRefresh_SR</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>decStatus</name>
        <label>Current Status</label>
        <locationX>183</locationX>
        <locationY>365</locationY>
        <defaultConnector>
            <targetReference>scnSelect_Next_Action</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>outCompleted</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varStatus</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <label>Completed</label>
        </rules>
        <rules>
            <name>outCannnotComplete</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varStatus</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cannot Complete</stringValue>
                </rightValue>
            </conditions>
            <label>Cannot Complete</label>
        </rules>
        <rules>
            <name>outInProgress</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varStatus</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>In Progress</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>flGet_End_Break_Time</targetReference>
            </connector>
            <label>In Progress</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check if user is offline by comparing flow start time and WO Field &apos;Rest Break Now Test&apos; (system time + 3 mins).  This is required since if the user is offline, then the Rest Break End Time will not be correct - i.e the user will need to determine end of 30 min period.

Note: when Wait or Formula field is supported in FSL flow this will not be required.</description>
        <name>decUser_Offline</name>
        <label>User Offline?</label>
        <locationX>378</locationX>
        <locationY>491</locationY>
        <defaultConnector>
            <targetReference>flGet_End_Break_Time</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>N</defaultConnectorLabel>
        <rules>
            <name>outYoffline</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>dtFlowStart</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>sobWorkOrder.Rest_Break_Now_Test__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scnRBInProgOffline</targetReference>
            </connector>
            <label>Y</label>
        </rules>
    </decisions>
    <description>Flow to complete Transport Rest Break. With set RB fields on FFD. Set SR RB1 End. With OFFLINE Heading.
TDF Enhance 19.8.20 Set radio options as required</description>
    <interviewLabel>TDF_Rest_Break {!$Flow.CurrentDateTime}</interviewLabel>
    <label>TDF Rest Break</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>FieldServiceMobile</processType>
    <recordLookups>
        <name>flFast_Lookup_Service_Resource</name>
        <label>Fast Lookup Service Resource</label>
        <locationX>16</locationX>
        <locationY>556</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>decStatus</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varSRId</elementReference>
            </value>
        </filters>
        <object>ServiceResource</object>
        <outputReference>sobServiceResource</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>LastKnownLatitude</queriedFields>
        <queriedFields>LastKnownLongitude</queriedFields>
        <queriedFields>LastKnownLocationDate</queriedFields>
        <queriedFields>Rest_Break_In_Progress__c</queriedFields>
        <queriedFields>Rest_Break_1_End__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>flFast_Lookup_Work_Order</name>
        <label>Fast Lookup Work Order</label>
        <locationX>20</locationX>
        <locationY>359</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>assAssign_Status</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <object>WorkOrder</object>
        <outputReference>sobWorkOrder</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Status</queriedFields>
        <queriedFields>Rest_Break_Start_Time__c</queriedFields>
        <queriedFields>Start_Location__Latitude__s</queriedFields>
        <queriedFields>Start_Location__Longitude__s</queriedFields>
        <queriedFields>End_Location__Latitude__s</queriedFields>
        <queriedFields>End_Location__Longitude__s</queriedFields>
        <queriedFields>Start_Location_Date__c</queriedFields>
        <queriedFields>End_Location_Date__c</queriedFields>
        <queriedFields>Job_Instructions__c</queriedFields>
        <queriedFields>Rest_Break_Now_Test__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>flGet_End_Break_Time</name>
        <label>Get End Break Time</label>
        <locationX>183</locationX>
        <locationY>490</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>scnRest_Break_In_Prog</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <object>WorkOrder</object>
        <outputReference>sobWorkOrder</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Status</queriedFields>
        <queriedFields>Rest_Break_End_Time__c</queriedFields>
        <queriedFields>Rest_Break_Start_Time__c</queriedFields>
        <queriedFields>Rest_Break_End_Time_Grace__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>flRefresh_SR</name>
        <label>Get SR End</label>
        <locationX>186</locationX>
        <locationY>843</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>assEndFields</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varSRId</elementReference>
            </value>
        </filters>
        <object>ServiceResource</object>
        <outputReference>sobServiceResource2</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>LastKnownLatitude</queriedFields>
        <queriedFields>LastKnownLongitude</queriedFields>
        <queriedFields>LastKnownLocationDate</queriedFields>
        <queriedFields>IsActive</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>fuSet_SR_Start_Fields</name>
        <label>Set SR Start Fields</label>
        <locationX>958</locationX>
        <locationY>368</locationY>
        <connector>
            <targetReference>decCurrentRBs</targetReference>
        </connector>
        <inputReference>sobServiceResource</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>fuSet_WO_Start_Fields</name>
        <label>Set WO Start Fields</label>
        <locationX>795</locationX>
        <locationY>364</locationY>
        <connector>
            <targetReference>fuSet_SR_Start_Fields</targetReference>
        </connector>
        <inputReference>sobWorkOrder</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>fuSetSRCannotCompleteFields</name>
        <label>Set SR Cannot Complete Fields</label>
        <locationX>1184</locationX>
        <locationY>381</locationY>
        <connector>
            <targetReference>Set_SA_End</targetReference>
        </connector>
        <inputReference>sobServiceResource</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>fuSetWOCannotCompleteFields</name>
        <label>Set WO Cannot Complete Fields</label>
        <locationX>1185</locationX>
        <locationY>280</locationY>
        <connector>
            <targetReference>fuSetSRCannotCompleteFields</targetReference>
        </connector>
        <inputReference>sobWorkOrder</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>fuSetWOEndFields</name>
        <label>Set WO End Fields</label>
        <locationX>378</locationX>
        <locationY>963</locationY>
        <connector>
            <targetReference>Set_SR_End_Fields</targetReference>
        </connector>
        <inputReference>sobWorkOrder</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>ruSet_FFD_RB1_End</name>
        <label>Set FFD RB1 End</label>
        <locationX>906</locationX>
        <locationY>918</locationY>
        <connector>
            <targetReference>ruSet_SR_RB1_End</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varFFDId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Rest_Break_1_End__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>WorkOrder</object>
    </recordUpdates>
    <recordUpdates>
        <name>ruSet_FFD_RB1_Start</name>
        <label>Set FFD RB1 Start</label>
        <locationX>773</locationX>
        <locationY>448</locationY>
        <connector>
            <targetReference>Set_SA_Start</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varFFDId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Rest_Break_1_Start__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>WorkOrder</object>
    </recordUpdates>
    <recordUpdates>
        <name>ruSet_FFD_RB2_End</name>
        <label>Set FFD RB2 End</label>
        <locationX>907</locationX>
        <locationY>1002</locationY>
        <connector>
            <targetReference>Set_SA_End</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varFFDId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Rest_Break_2_End__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>WorkOrder</object>
    </recordUpdates>
    <recordUpdates>
        <name>ruSet_FFD_RB2_Start</name>
        <label>Set FFD RB2 Start</label>
        <locationX>773</locationX>
        <locationY>533</locationY>
        <connector>
            <targetReference>Set_SA_Start</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varFFDId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Rest_Break_2_Start__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>WorkOrder</object>
    </recordUpdates>
    <recordUpdates>
        <name>ruSet_SA_Colour_Red_CC</name>
        <label>Set SA Colour Red</label>
        <locationX>891</locationX>
        <locationY>270</locationY>
        <connector>
            <targetReference>fuSetWOCannotCompleteFields</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>FSL__GanttColor__c</field>
            <value>
                <stringValue>#FF0000</stringValue>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <name>ruSet_SA_Colour_Red_Terminate</name>
        <label>Set SA Colour Red</label>
        <locationX>382</locationX>
        <locationY>783</locationY>
        <connector>
            <targetReference>flRefresh_SR</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>FSL__GanttColor__c</field>
            <value>
                <stringValue>#FF0000</stringValue>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <name>ruSet_SR_RB1_End</name>
        <label>Set SR RB1 End</label>
        <locationX>1040</locationX>
        <locationY>918</locationY>
        <connector>
            <targetReference>Set_SA_End</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varSRId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Rest_Break_1_End__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>ServiceResource</object>
    </recordUpdates>
    <recordUpdates>
        <description>Set SA Actual End</description>
        <name>Set_SA_End</name>
        <label>Set SA End</label>
        <locationX>1186</locationX>
        <locationY>965</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>ActualEndTime</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <description>Set Actual Start to now, and clear the custom colour</description>
        <name>Set_SA_Start</name>
        <label>Set SA Start</label>
        <locationX>594</locationX>
        <locationY>493</locationY>
        <connector>
            <targetReference>decUser_Offline</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ParentRecordId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>ActualStartTime</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FSL__GanttColor__c</field>
            <value>
                <stringValue/>
            </value>
        </inputAssignments>
        <object>ServiceAppointment</object>
    </recordUpdates>
    <recordUpdates>
        <name>Set_SR_End_Fields</name>
        <label>Set SR End Fields</label>
        <locationX>580</locationX>
        <locationY>963</locationY>
        <connector>
            <targetReference>decCurrentRBe</targetReference>
        </connector>
        <inputReference>sobServiceResource</inputReference>
    </recordUpdates>
    <screens>
        <name>scnRBInProgOffline</name>
        <label>Rest Break In Progress OFFLINE</label>
        <locationX>744</locationX>
        <locationY>632</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>assAssign_Term_Reason_Off</targetReference>
        </connector>
        <fields>
            <name>txtOffline</name>
            <fieldText>Your rest break is in progress and can not complete until 30 minutes from: 

{!dtFlowStart}.

Select &apos;Next&apos; to complete the rest break after the compulsory 30 minute period.

If you complete the rest break early a violation will be recorded. If required please provide an explaination for any violation below:</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>fldRest_Break_T_offline</name>
            <dataType>String</dataType>
            <fieldText>Early Restbreak Termination Reason (if required)</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>scnReason_for_Termination</name>
        <label>Reason for Termination</label>
        <locationX>584</locationX>
        <locationY>683</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>assAssign_Termination_Reason</targetReference>
        </connector>
        <fields>
            <name>txtTerminate</name>
            <fieldText>You have chosen to terminate your rest break early.

Please enter a reason for this violation below, or select &apos;Back&apos; to return to the previous screen.</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>fldRest_Break_T</name>
            <dataType>String</dataType>
            <fieldText>Rest Break Termination Reason</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>scnReasonFNC</name>
        <label>Reason For Not Completing</label>
        <locationX>605</locationX>
        <locationY>270</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>assAssignCannotCompleteFields</targetReference>
        </connector>
        <fields>
            <name>txtCC</name>
            <fieldText>You have chosen to not complete the rest break.

Please enter a reason for this violation below, or select &apos;Back&apos; to return to the previous screen.</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>txtReason_for_nc</name>
            <dataType>String</dataType>
            <fieldText>Rest Break Non Completion Reason</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>scnRest_Break_In_Prog</name>
        <label>Rest Break In Progress</label>
        <locationX>183</locationX>
        <locationY>581</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>decRest_Break_Complete</targetReference>
        </connector>
        <fields>
            <name>txtRestBreakNotCompete</name>
            <fieldText>Your rest break is in progress and can not complete before:

{!sobWorkOrder.Rest_Break_End_Time__c}

Select from the options below:</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>radioContinueRestBreak</name>
            <choiceReferences>choContinue_Rest_Break</choiceReferences>
            <choiceReferences>choEnd_Rest_Break_Early</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>choContinue_Rest_Break</defaultSelectedChoiceReference>
            <fieldText>Next Action</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>scnSelect_Next_Action</name>
        <label>Select Next Action</label>
        <locationX>361</locationX>
        <locationY>360</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>decCannot_Complete</targetReference>
        </connector>
        <fields>
            <name>fldJobInstructions</name>
            <fieldText>Job Instructions:
{!sobWorkOrder.Job_Instructions__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>radioSNANew</name>
            <choiceReferences>choiceStartJob</choiceReferences>
            <choiceReferences>choiceCannotComplete</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>choiceStartJob</defaultSelectedChoiceReference>
            <fieldText>Actions</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <startElementReference>assGet_Start_Time</startElementReference>
    <status>Active</status>
    <variables>
        <name>DebugFlag</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Y</stringValue>
        </value>
    </variables>
    <variables>
        <name>dtFlowStart</name>
        <dataType>DateTime</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>$Flow.CurrentDateTime</elementReference>
        </value>
    </variables>
    <variables>
        <name>Id</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue>0WO0l000000CgyB</stringValue>
        </value>
    </variables>
    <variables>
        <name>sobServiceResource</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceResource</objectType>
    </variables>
    <variables>
        <name>sobServiceResource2</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceResource</objectType>
    </variables>
    <variables>
        <name>sobWorkOrder</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WorkOrder</objectType>
    </variables>
    <variables>
        <name>varFFDId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varRestBreakRemMins</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>varSRId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>0Hn0l00000000lT</stringValue>
        </value>
    </variables>
    <variables>
        <name>varStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varWORecordType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
