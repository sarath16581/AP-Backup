<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>add_new_TU_update_newly_created_objects</name>
        <label>add new TU update newly created objects</label>
        <locationX>322</locationX>
        <locationY>681</locationY>
        <assignmentItems>
            <assignToReference>TUresetnewlycreatedfield</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TUNEWWEEKFORLOOKUP</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LOOP_TU</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_false_to_day_off</name>
        <label>assign false to day off</label>
        <locationX>803</locationX>
        <locationY>632</locationY>
        <assignmentItems>
            <assignToReference>varholiday</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>TIMESHEET_ENTRY_ASSIGN</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>ASSIGN_HOLIDAY</name>
        <label>ASSIGN HOLIDAY</label>
        <locationX>780</locationX>
        <locationY>443</locationY>
        <assignmentItems>
            <assignToReference>holidaydate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SOHOLIDAY.ActivityDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>check_holiday</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>ASSIGN_NEW_WEEK_TU_RECORD</name>
        <label>ASSIGN NEW WEEK TU RECORD</label>
        <locationX>436</locationX>
        <locationY>41</locationY>
        <assignmentItems>
            <assignToReference>TUNEWWEEK.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TULASTWEEK.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TUNEWWEEK.Line_Manager__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TULASTWEEK.Line_Manager__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TUNEWWEEK.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CONSTANTNEW</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TUNEWWEEK.Work_Week_Start__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TUNEWWEEK.Work_Week_End__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ftoday7</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TUNEWWEEK.hidden_ready_for_new_week__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TUNEWWEEK.Week_Off__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TUNEWWEEK.Newly_Created__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>assign_to_new_week_tu_records_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Timesheet_to_SO_Collection</name>
        <label>Assign Timesheet to SO Collection</label>
        <locationX>679</locationX>
        <locationY>830</locationY>
        <assignmentItems>
            <assignToReference>Alltimesheetentries</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>SOTIMESHEET</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>daycount_plus_1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_to_new_week_tu_records_collection</name>
        <label>assign to new week tu records collection</label>
        <locationX>440</locationX>
        <locationY>192</locationY>
        <assignmentItems>
            <assignToReference>TURECORDCOLLECTIONNEWWEEK</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TUNEWWEEK</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LOOP_TU_RECORDS_COLLECTION</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>daycount_plus_1</name>
        <label>daycount plus 1</label>
        <locationX>511</locationX>
        <locationY>947</locationY>
        <assignmentItems>
            <assignToReference>daycount</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LOOKREGISTER</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>if_it_s_a_holiday_assign_true</name>
        <label>if it&apos;s a holiday assign true</label>
        <locationX>552</locationX>
        <locationY>614</locationY>
        <assignmentItems>
            <assignToReference>varholiday</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>TIMESHEET_ENTRY_ASSIGN</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>resetdaycount</name>
        <label>resetflag</label>
        <locationX>526</locationX>
        <locationY>312</locationY>
        <assignmentItems>
            <assignToReference>daycount</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>datecount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TUNEWWEEKFORLOOKUP.Newly_Created__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LOOKREGISTER</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>TIMESHEET_ENTRY_ASSIGN</name>
        <label>TIMESHEET ENTRY ASSIGN</label>
        <locationX>679</locationX>
        <locationY>732</locationY>
        <assignmentItems>
            <assignToReference>SOTIMESHEET.Time_Utilisation__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TUNEWWEEKFORLOOKUP.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOTIMESHEET.Work_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>daycount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOTIMESHEET.Start_Time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>soregister.Start_Time__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOTIMESHEET.Finish_Time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>soregister.End_Time__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOTIMESHEET.Lunch_Time_Mins__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>soregister.Lunch_Time_Mins__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SOTIMESHEET.Day_Off__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varholiday</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_Timesheet_to_SO_Collection</targetReference>
        </connector>
    </assignments>
    <constants>
        <name>CONSTANTNEW</name>
        <dataType>String</dataType>
        <value>
            <stringValue>New</stringValue>
        </value>
    </constants>
    <decisions>
        <name>check_holiday</name>
        <label>check holiday</label>
        <locationX>670</locationX>
        <locationY>526</locationY>
        <defaultConnector>
            <targetReference>assign_false_to_day_off</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>if_it_s_a_holiday</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>holidaydate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>daycount</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>if_it_s_a_holiday_assign_true</targetReference>
            </connector>
            <label>if it&apos;s a holiday</label>
        </rules>
    </decisions>
    <formulas>
        <name>datecount</name>
        <dataType>Date</dataType>
        <expression>Today()</expression>
    </formulas>
    <formulas>
        <name>ftoday7</name>
        <dataType>Date</dataType>
        <expression>Today()+6</expression>
    </formulas>
    <interviewLabel>TU POPULATE TIMESHEET ENTRIES {!$Flow.CurrentDateTime}</interviewLabel>
    <label>TU POPULATE TIMESHEET ENTRIES</label>
    <loops>
        <name>LOOKREGISTER</name>
        <label>LOOKREGISTER</label>
        <locationX>401</locationX>
        <locationY>507</locationY>
        <assignNextValueToReference>soregister</assignNextValueToReference>
        <collectionReference>SOTIMEREGISTER</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Look_up_holidays</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>add_new_TU_update_newly_created_objects</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>LOOP_TU</name>
        <label>LOOP TU</label>
        <locationX>95</locationX>
        <locationY>552</locationY>
        <assignNextValueToReference>TUNEWWEEKFORLOOKUP</assignNextValueToReference>
        <collectionReference>TUNEWWEEKIDS</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>LOOK_UP_TIME_REGISTER</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>create_all_timesheets</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>LOOP_TU_RECORDS_COLLECTION</name>
        <label>LOOP TU RECORDS COLLECTION</label>
        <locationX>107</locationX>
        <locationY>146</locationY>
        <assignNextValueToReference>TULASTWEEK</assignNextValueToReference>
        <collectionReference>TURECORDCOLLECTION</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>ASSIGN_NEW_WEEK_TU_RECORD</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>CREATE_NEW_WEEK_TU_RECORDS</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>create_all_timesheets</name>
        <label>create all timesheets</label>
        <locationX>96</locationX>
        <locationY>678</locationY>
        <connector>
            <targetReference>update_all_newly_created_flag</targetReference>
        </connector>
        <inputReference>Alltimesheetentries</inputReference>
    </recordCreates>
    <recordCreates>
        <name>CREATE_NEW_WEEK_TU_RECORDS</name>
        <label>CREATE NEW WEEK TU RECORDS</label>
        <locationX>104</locationX>
        <locationY>281</locationY>
        <connector>
            <targetReference>LOOK_UP_ALL_NEW_CREATED</targetReference>
        </connector>
        <inputReference>TURECORDCOLLECTIONNEWWEEK</inputReference>
    </recordCreates>
    <recordLookups>
        <name>LOOK_UP_ALL_NEW_CREATED</name>
        <label>LOOK UP ALL NEW CREATED TU RECORDS</label>
        <locationX>99</locationX>
        <locationY>421</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>LOOP_TU</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Newly_Created__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>Time_Utilisation__c</object>
        <outputReference>TUNEWWEEKIDS</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>OwnerId</queriedFields>
        <queriedFields>Work_Week_Start__c</queriedFields>
        <queriedFields>Work_Week_End__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Look_up_holidays</name>
        <label>Look up holidays</label>
        <locationX>625</locationX>
        <locationY>403</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>ASSIGN_HOLIDAY</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ActivityDate</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>datecount</elementReference>
            </value>
        </filters>
        <object>Holiday</object>
        <outputReference>SOHOLIDAY</outputReference>
        <queriedFields>ActivityDate</queriedFields>
        <queriedFields>Id</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>LOOK_UP_PREVIOUS_TU_RECORD</name>
        <label>LOOK UP PREVIOUS TU RECORD</label>
        <locationX>110</locationX>
        <locationY>22</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>LOOP_TU_RECORDS_COLLECTION</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>TUI</elementReference>
            </value>
        </filters>
        <object>Time_Utilisation__c</object>
        <outputReference>TURECORDCOLLECTION</outputReference>
        <queriedFields>OwnerId</queriedFields>
        <queriedFields>Id</queriedFields>
        <queriedFields>Line_Manager__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>LOOK_UP_TIME_REGISTER</name>
        <label>LOOK UP TIME REGISTER</label>
        <locationX>286</locationX>
        <locationY>347</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>resetdaycount</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OwnerId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>TUNEWWEEKFORLOOKUP.OwnerId</elementReference>
            </value>
        </filters>
        <object>Timesheet_Register__c</object>
        <outputReference>SOTIMEREGISTER</outputReference>
        <queriedFields>Week_Day__c</queriedFields>
        <queriedFields>Start_Time__c</queriedFields>
        <queriedFields>End_Time__c</queriedFields>
        <queriedFields>Lunch_Time_Mins__c</queriedFields>
        <sortField>Week_Seq__c</sortField>
        <sortOrder>Asc</sortOrder>
    </recordLookups>
    <recordUpdates>
        <name>update_all_newly_created_flag</name>
        <label>update all newly created flag</label>
        <locationX>96</locationX>
        <locationY>794</locationY>
        <inputReference>TUresetnewlycreatedfield</inputReference>
    </recordUpdates>
    <startElementReference>LOOK_UP_PREVIOUS_TU_RECORD</startElementReference>
    <status>Obsolete</status>
    <variables>
        <name>Alltimesheetentries</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Timesheet_Entry__c</objectType>
    </variables>
    <variables>
        <name>daycount</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>datecount</elementReference>
        </value>
    </variables>
    <variables>
        <name>holidaydate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SOHOLIDAY</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Holiday</objectType>
    </variables>
    <variables>
        <name>soregister</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Timesheet_Register__c</objectType>
    </variables>
    <variables>
        <name>SOTIMEREGISTER</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Timesheet_Register__c</objectType>
    </variables>
    <variables>
        <name>SOTIMESHEET</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Timesheet_Entry__c</objectType>
    </variables>
    <variables>
        <name>TUI</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>TULASTWEEK</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Time_Utilisation__c</objectType>
    </variables>
    <variables>
        <name>TUNEWWEEK</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Time_Utilisation__c</objectType>
    </variables>
    <variables>
        <name>TUNEWWEEKFORLOOKUP</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Time_Utilisation__c</objectType>
    </variables>
    <variables>
        <name>TUNEWWEEKIDS</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Time_Utilisation__c</objectType>
    </variables>
    <variables>
        <name>TURECORDCOLLECTION</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Time_Utilisation__c</objectType>
    </variables>
    <variables>
        <name>TURECORDCOLLECTIONNEWWEEK</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Time_Utilisation__c</objectType>
    </variables>
    <variables>
        <description>reset newly created flag to false</description>
        <name>TUresetnewlycreatedfield</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Time_Utilisation__c</objectType>
    </variables>
    <variables>
        <name>varallregistries</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Timesheet_Register__c</objectType>
    </variables>
    <variables>
        <name>varholiday</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
