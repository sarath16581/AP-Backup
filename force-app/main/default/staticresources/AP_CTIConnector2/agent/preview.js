define(["util","config"],function(e){var o="agent/preview: ",n=function(n){console.log(o+n.messageType);try{n.messageType==="OutboundRecordMessage"&&n.notificationType==="StatusChanged"&&(console.log(o+"id - "+n.record.id),console.log(o+"state - "+n.record.state),console.log(o+"phone - "+n.record.phone),n.record.mediaType="preview",n.record.state==="ReadyToCall"&&(console.log(o+"publish preview.pop"),e.getInstance("preview.pop").publish(n)))}catch(s){console.error(o+"ERROR - "+s.message)}};return{onMessage:n}})