define(["util","moment","config"],function(e){var o="agent/openmedia: ",n=function(n){console.log(o+n.messageType);try{if(n.messageType==="OpenMediaStateChangeMessage"&&n.notificationType==="StatusChange")switch(console.log(o+"id - "+n.openmedia.id),console.log(o+"state - "+n.openmedia.state),n.openmedia.state){case"Processing":console.log(o+"publish openmedia.pop"),e.getInstance("openmedia.pop").publish(n);break;case"Completed":console.log(o+"publish openmedia.ended"),e.getInstance("openmedia.ended").publish(n)}}catch(s){console.error(o+"ERROR - "+s.message)}};return{onMessage:n}})