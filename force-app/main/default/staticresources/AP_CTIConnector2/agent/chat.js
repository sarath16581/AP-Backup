define(["util","moment","config"],function(e){var t="agent/chat: ",a=function(a){console.log(t+a.messageType);try{if(a.messageType==="ChatStateChangeMessage"&&a.notificationType==="StatusChange")switch(console.log(t+"id - "+a.chat.id),console.log(t+"state - "+a.chat.state),a.chat.mediaType="chat",a.chat.state){case"Chatting":console.log(t+"publish chat.pop"),e.getInstance("chat.pop").publish(a);break;case"Completed":console.log(t+"publish chat.ended"),e.getInstance("chat.ended").publish(a)}}catch(s){console.error(t+"ERROR - "+s.message)}};return{onMessage:a}})