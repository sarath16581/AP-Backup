function BNLog(){this.timeBase=(new Date).getTime(),this.lines=new Array,this.lastLine="",this.repCount=0}function BNCriticalSectionQueue(){this.waitList=new Object,this.lastId=0}function BNCriticalSection(e){this.csQueue=e,this.debug=1}function BNResourceManager(e){this.csQueue=new BNCriticalSectionQueue,this.critSec=null,this.debug=1,this.resources=new Object,this.waiting=new Object,this.onloadInjected=!1,typeof e!="undefined"?this.strategy=e:this.strategy=Strategy.ScriptDOMInject}function BNSystem(){this.testServer=null}function BNTag(e){e?(this.id=e.id+1,this.server=e.server,this.customerId=e.customerId,this.code=e.code):this.id=0,this.attrs=new Object,this.docAttrs=new Object,this.css=new Object}function bnReadySignal(){bnResourceManager.registerResource(BN_READY_SIGNAL)}function bnCall(e,t,n){var r=bnResourceManager.getResource(e);if(!r){bnResourceManager.waitForResource(e,function(){bnCall(e,t,n)});return}if(typeof r!="object")return;var i=r[t];if(typeof i!="function")return;i.call(r,n)}function bnWaitForCustomerStatus(e){if(!bnCheckCustomerStatus()){var t=baynote_tag.getFailsafeResourceId();bnResourceManager.waitForResource(t,function(){bnWaitForCustomerStatus(e)},baynote_tag.getFailsafeResourceAddress(),"img");return}bnResourceManager.runCallback(e)}function bnCheckCustomerStatus(){var e=baynote_tag.getFailsafeResourceId();return bnResourceManager.getResource(e)?!0:!1}var BaynoteJSVersion="Version: V1143-01",BaynoteIgnored=!1,BN_READY_SIGNAL="ReadySignal",Strategy={ScriptDOMInject:2,OnLoadInject:3};if(typeof baynote_globals=="undefined")var baynote_globals=new Object;baynote_globals.CommonResourceURL="/baynote/tags3/common",baynote_globals.CommonResourceID="Common",baynote_globals.PolicyResourceID="Policy",baynote_globals.CustomerStatus="/baynote/customerstatus2",baynote_globals.CommonScriptId="commonScriptId",typeof baynote_inject_strategy!="undefined"?baynote_globals.DefaultInjectStrategy=baynote_inject_strategy:baynote_globals.DefaultInjectStrategy=Strategy.ScriptDOMInject,typeof baynote_server_timeout!="undefined"?baynote_globals.ServerTimeout=baynote_server_timeout:baynote_globals.ServerTimeout=undefined,typeof baynote_use_window_name!="undefined"?baynote_globals.UseWindowName=baynote_use_window_name:baynote_globals.UseWindowName=!1,baynote_globals.waitForReady=!1,baynote_globals.checkStatus=!1,baynote_globals.keepTrail=!1,baynote_globals.trailLength=5,bnIsOpera=navigator.userAgent.indexOf("Opera")>=0,bnIsSafari=navigator.userAgent.indexOf("AppleWebKit")>=0,bnIsKonqueror=navigator.userAgent.indexOf("Konqueror")>=0,bnIsKHTML=bnIsSafari||bnIsKonqueror||navigator.userAgent.indexOf("KHTML")>=0,bnIsIE=navigator.userAgent.indexOf("compatible")>=0&&navigator.userAgent.indexOf("MSIE")>=0&&!bnIsOpera,bnIsMozilla=navigator.userAgent.indexOf("Gecko")>=0&&!bnIsKHTML,BNLog.prototype.log=function(e){if(e==this.lastLine){++this.repCount;return}this.repCount>0&&this.lines.push("___ ABOVE REPEATED "+this.repCount+" TIME"+(this.repCount>1?"S":"")),this.lastLine=e,this.repCount=0;var t=(new Date).getTime()-this.timeBase;this.lines.push(t+": "+e)},BNLog.prototype.toString=function(){return this.repCount>0&&(this.lines.push("___ ABOVE REPEATED "+this.repCount+" TIME"+(this.repCount>1?"S":"")),this.lastLine="",this.repCount=0),this.lines.join("\n")};if(typeof bnLog=="undefined")var bnLog=new BNLog;BNCriticalSectionQueue.prototype.issueId=function(){return++this.lastId},BNCriticalSectionQueue.prototype.enqueue=function(e,t){this.waitList[e]=t},BNCriticalSectionQueue.prototype.getWaiter=function(e){return e==null?null:this.waitList[e]},BNCriticalSectionQueue.prototype.firstWaiter=function(){return this.getWaiter(this.nextWaiterKeyAfter(null))},BNCriticalSectionQueue.prototype.nextWaiterAfter=function(e){return this.getWaiter(this.nextWaiterKeyAfter(e))},BNCriticalSectionQueue.prototype.nextWaiterKeyAfter=function(e){for(var t in this.waitList){if(typeof this.waitList[t]!="object")continue;if(e==null)return t;e==t&&(e=null)}return null},BNCriticalSectionQueue.prototype.nextPredecessor=function(e,t){for(var n=t;n!=null;n=this.nextWaiterAfter(n.id))if(n.enter||n.number!=0&&(n.number<e.number||n.number==e.number&&n.id<e.id))return n;return null},BNCriticalSection.prototype.enter=function(e){this.enterFunc=e,this.id=this.csQueue.issueId(),this.csQueue.enqueue(this.id,this),this.enter=!0,this.number=(new Date).getTime(),this.enter=!1,this.attempt(this.csQueue.firstWaiter())},BNCriticalSection.prototype.leave=function(){this.debug&&bnLog.log("LEAVE "+this.id),this.number=0},BNCriticalSection.prototype.attempt=function(e){var t=this.csQueue.nextPredecessor(this,e);if(t!=null){this.debug&&bnLog.log("WAIT "+this.id);var n=this;return setTimeout(function(){n.attempt(t)},50)}this.debug&&bnLog.log("ENTER "+this.id),this.enterFunc()},BNResourceManager.prototype.getResource=function(e){return this.resources[e]},BNResourceManager.prototype.loadResource=function(e,t,n,r,i){if(typeof this.resources[e]!="undefined")return;this.resources[e]=null;var s=new BNCriticalSection(this.csQueue);s.enter(function(){bnResourceManager.inject(e,t,n,s,r,i)})},BNResourceManager.prototype.inject=function(e,t,n,r,i,s){this.critSec=r,this.debug&&bnLog.log("INJECT "+this.critSec.id+" ("+e+")");if(typeof n!="undefined"&&n!="script"&&n!="img"){bnLog.log("Unexpected resource type to loadResource: "+n);return}this.defaultInject(e,t,n,i,s)},BNResourceManager.prototype.defaultInject=function(e,t,n,r,i){if(BaynoteIgnored)return;if(!n||n=="script"){if(this.strategy==Strategy.OnLoadInject&&(e==baynote_globals.CommonResourceID||e==baynote_globals.PolicyResourceID)&&!this.onloadInjected){var s=function(){bnResourceManager.injectHandler(e,t,r,i)};window.addEventListener?window.addEventListener("load",s,!1):window.attachEvent?window.attachEvent("onload",s):window.onload=s,this.onloadInjected=!0;return}this.injectHandler(e,t,r,i)}else if(n=="img"){var o=document.createElement("IMG"),u=function(){bnResourceManager.registerAndAddResource(e,o)};o.addEventListener?o.addEventListener("load",u,!1):o.attachEvent?o.attachEvent("onload",u):o.onload=u,o.src=t,o.style.display="none";var a=document.getElementsByTagName("body"),f=a[0];setTimeout(function(){f!=null&&f.appendChild(o)},5)}},BNResourceManager.prototype.injectHandler=function(e,t,n,r,i){if(!this.resources[e]){if(typeof i!="undefined"){i.src="",typeof r=="function"&&r(),BaynoteIgnored=!0,bnLog.log("FATAL: Treating Baynote as down. Resource '"+e+"' took more than "+n+" mSec");return}var s=document.createElement("script");setTimeout(function(){var e=document.getElementsByTagName("head");s.language="javascript",s.src=t,e[0].appendChild(s)},50);if(n===undefined||n===null)n=baynote_globals.ServerTimeout;typeof n!="undefined"&&setTimeout(function(){bnResourceManager.injectHandler(e,t,n,r,s)},n)}},BNResourceManager.prototype.waitForResource=function(rId,callbackCode,rAddress,rType,timeout,failureFunc){with(this)if(getResource(rId))this.runCallback(callbackCode);else{typeof waiting[rId]=="undefined"&&(waiting[rId]=new Array);var waitingList=waiting[rId];waitingList[waitingList.length]=callbackCode,rAddress&&this.loadResource(rId,rAddress,rType,timeout,failureFunc)}},BNResourceManager.prototype.wakeUpWaiting=function(rId){with(this){var waitingList=waiting[rId];if(!waitingList)return;for(var i=0;i<waitingList.length;i++)if(waitingList[i]){var codeToEval=waitingList[i];waitingList[i]=null,this.debug&&codeToEval&&bnLog.log("CALLBACK "+rId+": "+codeToEval),this.runCallback(codeToEval)}}},BNResourceManager.prototype.registerAndAddResource=function(e,t){this.debug&&bnLog.log("REGISTER "+(this.critSec?this.critSec.id:"")+" ("+e+")"),this.resources[e]=t,this.wakeUpWaiting(e),this.critSec&&this.critSec.leave(),setTimeout("bnResourceManager.wakeUpWaiting('"+e+"')",5e3)},BNResourceManager.prototype.registerResource=function(e){this.registerAndAddResource(e,!0)},BNResourceManager.prototype.removeResource=function(e){this.resources[e]=null,delete this.resources[e]},BNResourceManager.prototype.runCallback=function(e){typeof e=="function"?e():alert("Invalid callback, type="+typeof e)};if(typeof bnResourceManager=="undefined")var bnResourceManager=new BNResourceManager(baynote_globals.DefaultInjectStrategy);BNSystem.prototype.getCookieValue=function(e,t){t||(t=baynote_globals.cookieSubDomain),t&&(e+="-"+t);var n="(?:; )?"+e+"=([^;]*);?",r=new RegExp(n);return r.test(document.cookie)?decodeURIComponent(RegExp.$1):null},BNSystem.prototype.setCookie=function(e,t,n,r,i,s){t=encodeURIComponent(t);if(r=="NEVER"){var o=new Date;o.setFullYear(o.getFullYear()+500),r=o.toGMTString()}else r=="SESSION"&&(r="");n!=""&&(n=";Path="+n),r!=""&&(r=";expires="+r),i||(i=baynote_globals.cookieDomain?baynote_globals.cookieDomain:""),i!=""&&(i=";domain="+i),s||(s=baynote_globals.cookieSubDomain),s&&(e+="-"+s);var u=e+"="+t+r+n+i;return u.length>4096?!1:(document.cookie=u,!0)},BNSystem.prototype.removeCookie=function(e,t){this.setCookie(e,"","/","Mon, 1 Jan 1990 00:00:00",t)},BNSystem.prototype.getURLParam=function(e,t){if(!t)var t=window.location.href;var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=n.exec(t);return r?r[1]:null},BNSystem.prototype.getTestServer=function(){if(this.testServer!=null)return this.testServer;var e=this.getCookieValue("bn_test");return e||(e=""),this.testServer=e,e};if(typeof bnSystem=="undefined")var bnSystem=new BNSystem;BNTag.prototype.getCommonResourceId=function(){return baynote_globals.CommonResourceID},BNTag.prototype.getCommonResourceAddress=function(e){var t="?";for(var n in e)n!="server"&&(t+=n+"="+encodeURIComponent(e[n])+"&");var r=t.substring(0,t.length-1),i=this.server+baynote_globals.CommonResourceURL+r;return i},BNTag.prototype.getFailsafeResourceId=function(){return"Failsafe"},BNTag.prototype.getFailsafeResourceAddress=function(){var e=BaynoteJSVersion.split(" ")[1],t=bnSystem.getCookieValue("bn_u");return this.server+baynote_globals.CustomerStatus+"?customerId="+this.customerId+"&code="+this.code+"&v="+e+"&u="+t},BNTag.prototype.getParam=function(e,t){var n=this[e];return typeof n=="undefined"||n==null?t:n};if(typeof baynote_tag=="undefined"){window.bn_tags=new Array;var baynote_tag=new BNTag(null)}var BaynoteAPI={};BaynoteAPI.getURLParam=function(e,t){return bnSystem.getURLParam(e,t)},BaynoteAPI.init=function(e){if(!e||!e.server||!e.customerId||!e.code){bnLog.log("ERROR: init called with insufficient arguments - needs server, customerId, code");return}e.timeout||(e.timeout=baynote_globals.ServerTimeout),e.onFailure||(e.onFailure=baynote_globals.onFailure);var t=bnSystem.getTestServer();if(t){var n=new RegExp("^https?://[^/]*\\.baynote\\.(com|net):?\\d*(/.*)?$");n.test(t)?e.server=t:bnLog.log('Ignoring invalid test server "'+t+'"')}e.server&&(baynote_tag.server=e.server),e.customerId&&(baynote_tag.customerId=e.customerId),e.code&&(baynote_tag.code=e.code);var r=baynote_tag.getCommonResourceId();bnResourceManager.getResource(r)?BaynoteIgnored||bnCommon.completePreload(e):bnResourceManager.waitForResource(r,function(){BaynoteAPI.init(e)},baynote_tag.getCommonResourceAddress(e),"script",e.timeout,e.onFailure)},BaynoteAPI.execute=function(e,t){var n=baynote_tag.getCommonResourceId();if(typeof bnResourceManager.getResource(n)=="undefined"){bnLog.log("WARN: common not loaded - exiting execute; consider calling init first");return}if(typeof bnCommon=="undefined"){bnResourceManager.waitForResource(n,function(){BaynoteAPI.execute(e,t)});return}bnCommon.waitAndExecute(e,t)},BaynoteAPI.executeAll=function(e){var t=baynote_tag.getCommonResourceId();if(typeof bnResourceManager.getResource(t)=="undefined"){bnLog.log("WARN: common not loaded - exiting executeAll; consider calling init first");return}if(typeof bnCommon=="undefined"){bnResourceManager.waitForResource(t,function(){BaynoteAPI.executeAll(e)});return}bnCommon.waitAndExecuteAll(e)},BaynoteAPI.call=function(e,t,n,r){var i=baynote_tag.getCommonResourceId();if(typeof bnResourceManager.getResource(i)=="undefined"){bnLog.log("WARN: common not loaded - exiting call; consider calling init first");return}if(typeof bnCommon=="undefined"){bnResourceManager.waitForResource(i,function(){BaynoteAPI.call(e,t,n,r)});return}bnCommon.finishCall(e,t,n,r)},BaynoteAPI.isBaynoteIgnored=function(){return BaynoteIgnored},BaynoteAPI.getCookieDomain=function(){var e="",t=window.location.href,n=t.indexOf("//"),r=t.substring(n+2),i=r.indexOf("/");if(i<0)var s=r;else var s=r.substring(0,i);var o=s.indexOf("."),u=s.substring(o+1);return u,e=u},baynote_globals.cookieDomain=BaynoteAPI.getCookieDomain();var preLoadObj={},bn_locHref=window.location.href;bn_locHref.indexOf("https://")==0?preLoadObj.server="https://auspost-www.baynote.net":preLoadObj.server="http://auspost-www.baynote.net",preLoadObj.customerId="auspost",preLoadObj.code="www",BaynoteAPI.init(preLoadObj),(typeof baynoteObserver=="undefined"||typeof baynoteObserver!="boolean"||baynoteObserver)&&BaynoteAPI.execute("observer"),(typeof baynoteGuide=="undefined"||typeof baynoteGuide!="boolean"||baynoteGuide)&&BaynoteAPI.execute("recommendation"),typeof baynoteDisableAjax!="undefined"&&typeof baynoteDisableAjax=="boolean"&&!baynoteDisableAjax&&BaynoteAPI.execute("ajax");