!function(){var e={},t=e={version:"2.5.7"};"number"==typeof __e&&(__e=t);var n={}.toString,r=function(e){return n.call(e).slice(8,-1)},o={},i=o="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i);var a,u=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(a=function(e,t){return u[e]||(u[e]=void 0!==t?t:{})})("versions",[]).push({version:e.version,mode:"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"});var s=0,c=Math.random(),f=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++s+c).toString(36))},d={},l=a("wks"),h=o.Symbol,p="function"==typeof h;(d=function(e){return l[e]||(l[e]=p&&h[e]||(p?h:f)("Symbol."+e))}).store=l;var w=d("toStringTag"),m="Arguments"==r(function(){return arguments}()),g={}.hasOwnProperty,y=function(e,t){return g.call(e,t)},v=function(e){try{return!!e()}catch(e){return!0}},_=!v(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),E=function(e){return"object"==typeof e?null!==e:"function"==typeof e},b=function(e){if(!E(e))throw TypeError(e+" is not an object!");return e},O=o.document,A=E(O)&&E(O.createElement),S=function(e){return A?O.createElement(e):{}},I=!_&&!v(function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a}),T=function(e,t){if(!E(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!E(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!E(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!E(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},R={},C=Object.defineProperty;R.f=_?Object.defineProperty:function(e,t,n){if(b(e),t=T(t,!0),b(n),I)try{return C(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e};var j,P=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},N=_?function(e,t,n){return R.f(e,t,P(1,n))}:function(e,t,n){return e[t]=n,e},D=f("src"),M=Function.toString,W=(""+M).split("toString");e.inspectSource=function(e){return M.call(e)},(j=function(e,t,n,r){var i="function"==typeof n;i&&(y(n,"name")||N(n,"name",t)),e[t]!==n&&(i&&(y(n,D)||N(n,D,e[t]?""+e[t]:W.join(String(t)))),e===o?e[t]=n:r?e[t]?e[t]=n:N(e,t,n):(delete e[t],N(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[D]||M.call(this)});var x={};x[d("toStringTag")]="z",x+""!="[object z]"&&j(Object.prototype,"toString",function(){return"[object "+(void 0===(e=this)?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),w))?n:m?r(t):"Object"==(o=r(t))&&"function"==typeof t.callee?"Arguments":o)+"]";var e,t,n,o},!0);var U={};U.f=Object.getOwnPropertySymbols;var k,L="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),B=Math.ceil,F=Math.floor,H=function(e){return isNaN(e=+e)?0:(e>0?F:B)(e)},z=Math.max,Y=Math.min,G=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},V=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)},K=function(e){return V(G(e))},q=Math.min,J=function(e){return e>0?q(H(e),9007199254740991):0},Z=a("keys"),X=function(e){return Z[e]||(Z[e]=f(e))},Q=(k=!1,function(e,t,n){var r,o=K(e),i=J(o.length),a=function(e,t){return(e=H(e))<0?z(e+t,0):Y(e,t)}(n,i);if(k&&t!=t){for(;i>a;)if((r=o[a++])!=r)return!0}else for(;i>a;a++)if((k||a in o)&&o[a]===t)return k||a||0;return!k&&-1}),$=X("IE_PROTO"),ee=function(e,t){var n,r=K(e),o=0,i=[];for(n in r)n!=$&&y(r,n)&&i.push(n);for(;t.length>o;)y(r,n=t[o++])&&(~Q(i,n)||i.push(n));return i},te=Object.keys||function(e){return ee(e,L)},ne={};ne.f={}.propertyIsEnumerable;var re=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},oe={},ie=function(t,n,r){var i,a,u,s,c=t&ie.F,f=t&ie.G,d=t&ie.S,l=t&ie.P,h=t&ie.B,p=f?o:d?o[n]||(o[n]={}):(o[n]||{}).prototype,w=f?e:e[n]||(e[n]={}),m=w.prototype||(w.prototype={});for(i in f&&(r=n),r)u=((a=!c&&p&&void 0!==p[i])?p:r)[i],s=h&&a?re(u,o):l&&"function"==typeof u?re(Function.call,u):u,p&&j(p,i,u,t&ie.U),w[i]!=u&&N(w,i,s),l&&m[i]!=u&&(m[i]=u)};o.core=e,ie.F=1,ie.G=2,ie.S=4,ie.P=8,ie.B=16,ie.W=32,ie.U=64,ie.R=128,oe=ie;var ae,ue=Array.isArray||function(e){return"Array"==r(e)},se=f("meta"),ce=(R.f,Object.isExtensible||function(){return!0}),fe=(v(function(){return ce(Object.preventExtensions({}))}),ae={KEY:se},o.document),de=fe&&fe.documentElement,le=_?Object.defineProperties:function(e,t){b(e);for(var n,r=te(t),o=r.length,i=0;o>i;)R.f(e,n=r[i++],t[n]);return e},he=X("IE_PROTO"),pe=function(){},we=function(){var e,t=S("iframe"),n=L.length;for(t.style.display="none",de.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),we=e.F;n--;)delete we.prototype[L[n]];return we()},me=Object.create||function(e,t){var n;return null!==e?(pe.prototype=b(e),n=new pe,pe.prototype=null,n[he]=e):n=we(),void 0===t?n:le(n,t)},ge={},ye=Object.getOwnPropertyDescriptor;ge.f=_?ye:function(e,t){if(e=K(e),t=T(t,!0),I)try{return ye(e,t)}catch(e){}if(y(e,t))return P(!ne.f.call(e,t),e[t])};var ve={},_e=L.concat("length","prototype");ve.f=Object.getOwnPropertyNames||function(e){return ee(e,_e)};var Ee={},be=ve.f,Oe={}.toString,Ae="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Ee.f=function(e){return Ae&&"[object Window]"==Oe.call(e)?function(e){try{return be(e)}catch(e){return Ae.slice()}}(e):be(K(e))};var Se=R.f,Ie=d("toStringTag"),Te=function(e,t,n){e&&!y(e=n?e:e.prototype,Ie)&&Se(e,Ie,{configurable:!0,value:t})},Re={};Re.f=d;var Ce=R.f,je=function(t){var n=e.Symbol||(e.Symbol=o.Symbol||{});"_"==t.charAt(0)||t in n||Ce(n,t,{value:Re.f(t)})},Pe=ae.KEY,Ne=ge.f,De=R.f,Me=Ee.f,We=o.Symbol,xe=o.JSON,Ue=xe&&xe.stringify,ke=d("_hidden"),Le=d("toPrimitive"),Be={}.propertyIsEnumerable,Fe=a("symbol-registry"),He=a("symbols"),ze=a("op-symbols"),Ye=Object.prototype,Ge="function"==typeof We,Ve=o.QObject,Ke=!Ve||!Ve.prototype||!Ve.prototype.findChild,qe=_&&v(function(){return 7!=me(De({},"a",{get:function(){return De(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=Ne(Ye,t);r&&delete Ye[t],De(e,t,n),r&&e!==Ye&&De(Ye,t,r)}:De,Je=function(e){var t=He[e]=me(We.prototype);return t._k=e,t},Ze=Ge&&"symbol"==typeof We.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof We},Xe=function(e,t,n){return e===Ye&&Xe(ze,t,n),b(e),t=T(t,!0),b(n),y(He,t)?(n.enumerable?(y(e,ke)&&e[ke][t]&&(e[ke][t]=!1),n=me(n,{enumerable:P(0,!1)})):(y(e,ke)||De(e,ke,P(1,{})),e[ke][t]=!0),qe(e,t,n)):De(e,t,n)},Qe=function(e,t){b(e);for(var n,r=function(e){var t=te(e),n=U.f;if(n)for(var r,o=n(e),i=ne.f,a=0;o.length>a;)i.call(e,r=o[a++])&&t.push(r);return t}(t=K(t)),o=0,i=r.length;i>o;)Xe(e,n=r[o++],t[n]);return e},$e=function(e){var t=Be.call(this,e=T(e,!0));return!(this===Ye&&y(He,e)&&!y(ze,e))&&(!(t||!y(this,e)||!y(He,e)||y(this,ke)&&this[ke][e])||t)},et=function(e,t){if(e=K(e),t=T(t,!0),e!==Ye||!y(He,t)||y(ze,t)){var n=Ne(e,t);return!n||!y(He,t)||y(e,ke)&&e[ke][t]||(n.enumerable=!0),n}},tt=function(e){for(var t,n=Me(K(e)),r=[],o=0;n.length>o;)y(He,t=n[o++])||t==ke||t==Pe||r.push(t);return r},nt=function(e){for(var t,n=e===Ye,r=Me(n?ze:K(e)),o=[],i=0;r.length>i;)!y(He,t=r[i++])||n&&!y(Ye,t)||o.push(He[t]);return o};Ge||(j((We=function(){if(this instanceof We)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===Ye&&t.call(ze,n),y(this,ke)&&y(this[ke],e)&&(this[ke][e]=!1),qe(this,e,P(1,n))};return _&&Ke&&qe(Ye,e,{configurable:!0,set:t}),Je(e)}).prototype,"toString",function(){return this._k}),ge.f=et,R.f=Xe,ve.f=Ee.f=tt,ne.f=$e,U.f=nt,_&&j(Ye,"propertyIsEnumerable",$e,!0),Re.f=function(e){return Je(d(e))}),oe(oe.G+oe.W+oe.F*!Ge,{Symbol:We});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ot=0;rt.length>ot;)d(rt[ot++]);for(var it=te(d.store),at=0;it.length>at;)je(it[at++]);oe(oe.S+oe.F*!Ge,"Symbol",{for:function(e){return y(Fe,e+="")?Fe[e]:Fe[e]=We(e)},keyFor:function(e){if(!Ze(e))throw TypeError(e+" is not a symbol!");for(var t in Fe)if(Fe[t]===e)return t},useSetter:function(){Ke=!0},useSimple:function(){Ke=!1}}),oe(oe.S+oe.F*!Ge,"Object",{create:function(e,t){return void 0===t?me(e):Qe(me(e),t)},defineProperty:Xe,defineProperties:Qe,getOwnPropertyDescriptor:et,getOwnPropertyNames:tt,getOwnPropertySymbols:nt}),xe&&oe(oe.S+oe.F*(!Ge||v(function(){var e=We();return"[null]"!=Ue([e])||"{}"!=Ue({a:e})||"{}"!=Ue(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(E(t)||void 0!==e)&&!Ze(e))return ue(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Ze(t))return t}),r[1]=t,Ue.apply(xe,r)}}),We.prototype[Le]||N(We.prototype,Le,We.prototype.valueOf),Te(We,"Symbol"),Te(Math,"Math",!0),Te(o.JSON,"JSON",!0);e.Symbol;var ut,st=d("unscopables"),ct=Array.prototype;null==ct[st]&&N(ct,st,{}),ut=function(e){ct[st][e]=!0};var ft,dt,lt,ht,pt,wt,mt,gt,yt,vt=d("species"),_t=function(e){return Object(G(e))},Et=(lt=1==(ft=5),ht=2==ft,pt=3==ft,wt=4==ft,mt=6==ft,gt=5==ft||mt,yt=dt||function(e,t){return new(function(e){var t;return ue(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!ue(t.prototype)||(t=void 0),E(t)&&null===(t=t[vt])&&(t=void 0)),void 0===t?Array:t}(e))(t)},function(e,t,n){for(var r,o,i=_t(e),a=V(i),u=re(t,n,3),s=J(a.length),c=0,f=lt?yt(e,s):ht?yt(e,0):void 0;s>c;c++)if((gt||c in a)&&(o=u(r=a[c],c,i),ft))if(lt)f[c]=o;else if(o)switch(ft){case 3:return!0;case 5:return r;case 6:return c;case 2:f.push(r)}else if(wt)return!1;return mt?-1:pt||wt?wt:f}),bt=!0;"find"in[]&&Array(1).find(function(){bt=!1}),oe(oe.P+oe.F*bt,"Array",{find:function(e){return Et(this,e,arguments.length>1?arguments[1]:void 0)}}),ut("find");e.Array.find;var Ot=Object.assign,At=!Ot||v(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Ot({},e)[n]||Object.keys(Ot({},t)).join("")!=r})?function(e,t){for(var n=_t(e),r=arguments.length,o=1,i=U.f,a=ne.f;r>o;)for(var u,s=V(arguments[o++]),c=i?te(s).concat(i(s)):te(s),f=c.length,d=0;f>d;)a.call(s,u=c[d++])&&(n[u]=s[u]);return n}:Ot;oe(oe.S+oe.F,"Object",{assign:At});e.Object.assign;var St=d("match"),It=d("match"),Tt=function(e,t,n){if(E(o=t)&&(void 0!==(i=o[It])?i:"RegExp"==r(o)))throw TypeError("String#"+n+" doesn't accept regex!");var o,i;return String(G(e))},Rt="".endsWith;oe(oe.P+oe.F*function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[St]=!1,!"/./"[e](t)}catch(e){}}return!0}("endsWith"),"String",{endsWith:function(e){var t=Tt(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=J(t.length),o=void 0===n?r:Math.min(J(n),r),i=String(e);return Rt?Rt.call(t,i,o):t.slice(o-i.length,o)===i}});e.String.endsWith;var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.default={getConfig:function(){var e=function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t+=1){var n=e[t];if(n.src&&-1!==n.src.indexOf("/sdk/app.js"))return n.src}return"https://digitalid.com"}(),t=void 0;try{var n=e.indexOf("?");t=(t=-1!==n?e.substring(0,n):e).replace("/sdk/app.js","")}catch(t){console.warn("Invalid URL",e)}var r="https://digitalid.com",o=-1!==e.indexOf("localhost")||-1!==e.indexOf("lvh.me"),i="http://lvh.me:3000";return{oauthUrl:o?i+"/api/oauth2":r+"/oauth2",postMessageBridgeWebUrl:o?i+"/platform/web/content/html/post-message-bridge":r+"/sdk/post-message-bridge",envDomain:o?""+i:r,sdkUrl:t+"/sdk"}}};var jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.ACTIONS=void 0;var Pt,Nt=(Pt=Ct)&&Pt.__esModule?Pt:{default:Pt};jt.ACTIONS={idv:{label:"Verify with Digital&nbsp;iD",alt:"Verify with Digital ID",image:Nt.default.getConfig().sdkUrl+"/images/verify-with-digital-id.svg"},ekyc:{label:"Verify with Digital&nbsp;iD",alt:"Verify with Digital ID",image:Nt.default.getConfig().sdkUrl+"/images/verify-with-digital-id.svg"},authentication:{label:"Login with Digital&nbsp;iD",alt:"Login with Digital ID",image:Nt.default.getConfig().sdkUrl+"/images/login-with-digital-id.svg"}},jt.default=function e(t,n,r){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var o=document.createElement("button");if(o.onclick=n,r&&"basic"===r.type)o.innerHTML=r.label||t.label,"string"==typeof r.classNames?o.className=r.classNames:Array.isArray(r.classNames)&&(o.className=r.classNames.join(" "));else{var i="0 2px 4px 0 rgba(11, 11, 11, .49)";o.style.border="solid 1px #0035a6",o.style.backgroundColor="#0045d8",o.style.width="280px",o.style.height="50px",o.style.borderRadius="5px",o.style.padding="10px",o.style.boxShadow=i,o.style.cursor="pointer",o.addEventListener("mouseenter",function(){this.style.backgroundColor="#0035a6"}),o.addEventListener("mouseleave",function(){this.style.backgroundColor="#0045d8"}),o.addEventListener("mousedown",function(){this.style.boxShadow="none"}),o.addEventListener("mouseup",function(){this.style.boxShadow=i});var a=new Image;a.src=t.image,a.alt=t.alt,a.style.marginTop="3px",a.style.height="22px",a.onload=function(){o.appendChild(a)},a.onerror=function(){o.innerHTML=t.label},o.image=a}return o};var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default={BIRTH_CERTIFICATE_AUS:"claimed_image_birth_certificate_aus",CITIZENSHIP_CERTIFICATE_AUS:"claimed_image_citizenship_certificate_aus",COMMONWEALTH_SENIORS_HEALTH_CARD:"claimed_image_commonwealth_seniors_health_card_aus",DRIVER_LICENCE_AUS:"claimed_image_drivers_licence_aus",FIREARMS_LICENCE:"claimed_image_firearms_licence_aus",HEALTH_CARE_CARD:"claimed_image_health_care_card_aus",IMMIGRATION_CARD_AUS:"claimed_image_immigration_card_aus",INTERNATIONAL_PASSPORT:"claimed_image_passport_visa_aus",MEDICARE:"claimed_image_medicare_aus",PASSPORT:"claimed_image_passport_aus",PENSIONER_CONCESSION_CARD:"claimed_image_pensioner_concession_card_aus",PROOF_OF_AGE:"claimed_image_proof_of_age_card_aus",SECURITY_GUARD_LICENCE:"claimed_image_security_guard_id_aus",VETERAN_AFFAIRS_CARD:"claimed_image_dept_veteran_affairs_card_aus",WORKING_WITH_CHILDREN_AUS:"claimed_image_working_with_children_aus",CREDIT_CARD:"claimed_image_credit_card_aus",SELFIE_WITH_DOCUMENT:"claimed_selfie_with_document",REVISED_BIRTH_CERTIFICATE:"claimed_image_revised_birth_certificate_aus",MARRIAGE_CERTIFICATE:"claimed_image_marriage_certificate_aus",CHANGE_OF_NAME_CERTIFICATE:"claimed_image_change_of_name_certificate_aus",DEED_POLL:"claimed_image_deed_poll_aus"};var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});var Wt,xt=(Wt=Dt)&&Wt.__esModule?Wt:{default:Wt};Mt.default={BIRTH_CERTIFICATE:xt.default.BIRTH_CERTIFICATE_AUS,CITIZENSHIP_CERTIFICATE:xt.default.CITIZENSHIP_CERTIFICATE_AUS,SENIORS_HEALTH_CARD:xt.default.COMMONWEALTH_SENIORS_HEALTH_CARD,DRIVER_LICENCE:xt.default.DRIVER_LICENCE_AUS,FIREARMS_LICENCE:xt.default.FIREARMS_LICENCE,HEALTH_CARE_CARD:xt.default.HEALTH_CARE_CARD,IMMICARD:xt.default.IMMIGRATION_CARD_AUS,INTERNATIONAL_PASSPORT:xt.default.INTERNATIONAL_PASSPORT,MEDICARE:xt.default.MEDICARE,AUSTRALIAN_PASSPORT:xt.default.PASSPORT,PENSIONER_CONCESSION_CARD:xt.default.PENSIONER_CONCESSION_CARD,PROOF_OF_AGE:xt.default.PROOF_OF_AGE,SECURITY_GUARD_LICENCE:xt.default.SECURITY_GUARD_LICENCE,VETERAN_AFFAIRS_CARD:xt.default.VETERAN_AFFAIRS_CARD,WORKING_WITH_CHILDREN:xt.default.WORKING_WITH_CHILDREN_AUS,CREDIT_CARD:xt.default.CREDIT_CARD,SELFIE_WITH_DOCUMENT:xt.default.SELFIE_WITH_DOCUMENT,REVISED_BIRTH_CERTIFICATE:xt.default.REVISED_BIRTH_CERTIFICATE,MARRIAGE_CERTIFICATE:xt.default.MARRIAGE_CERTIFICATE,CHANGE_OF_NAME_CERTIFICATE:xt.default.CHANGE_OF_NAME_CERTIFICATE,DEED_POLL:xt.default.DEED_POLL};var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.default={BACKGROUND_CHECK:"background_check",BIRTH_CERTIFICATE_AUS:"birth_certificate_aus",CITIZENSHIP_CERTIFICATE_AUS:"citizenship_certificate_aus",COMMONWEALTH_SENIORS_HEALTH_CARD:"commonwealth_seniors_health_card",CONCESSION_CARD:"concession_card",DRIVER_LICENCE_AUS:"drivers_licence_aus",FIREARMS_LICENCE:"firearms_licence",HEALTH_CARE_CARD:"health_care_card",IMMIGRATION_CARD_AUS:"immigration_card_aus",INTERNATIONAL_PASSPORT:"passport_visa",MEDICARE:"medicare",PASSPORT:"passport",PENSIONER_CONCESSION_CARD:"pensioner_concession_card",PROOF_OF_AGE:"proof_of_age_card",SECURITY_GUARD_LICENCE:"security_guard_id",VETERAN_AFFAIRS_CARD:"dept_veteran_affairs_card",WORKING_WITH_CHILDREN_AUS:"working_with_children_aus"};var kt={};Object.defineProperty(kt,"__esModule",{value:!0});var Lt,Bt=(Lt=Ut)&&Lt.__esModule?Lt:{default:Lt};kt.default={AUSTRALIAN_PASSPORT:Bt.default.PASSPORT,BIRTH_CERTIFICATE:Bt.default.BIRTH_CERTIFICATE_AUS,CITIZENSHIP_CERTIFICATE:Bt.default.CITIZENSHIP_CERTIFICATE_AUS,DRIVER_LICENCE:Bt.default.DRIVER_LICENCE_AUS,IMMICARD:Bt.default.IMMIGRATION_CARD_AUS,INTERNATIONAL_PASSPORT:Bt.default.INTERNATIONAL_PASSPORT,MEDICARE:Bt.default.MEDICARE};for(var Ft={toByteArray:function(e){for(var t,n=qt(e),r=n[0],o=n[1],i=new Yt(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),a=0,u=o>0?r-4:r,s=0;s<u;s+=4)t=zt[e.charCodeAt(s)]<<18|zt[e.charCodeAt(s+1)]<<12|zt[e.charCodeAt(s+2)]<<6|zt[e.charCodeAt(s+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=255&t;return 2===o&&(t=zt[e.charCodeAt(s)]<<2|zt[e.charCodeAt(s+1)]>>4,i[a++]=255&t),1===o&&(t=zt[e.charCodeAt(s)]<<10|zt[e.charCodeAt(s+1)]<<4|zt[e.charCodeAt(s+2)]>>2,i[a++]=t>>8&255,i[a++]=255&t),i},fromByteArray:function(e){for(var t,n=e.length,r=n%3,o=[],i=0,a=n-r;i<a;i+=16383)o.push(Jt(e,i,i+16383>a?a:i+16383));return 1===r?(t=e[n-1],o.push(Ht[t>>2]+Ht[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(Ht[t>>10]+Ht[t>>4&63]+Ht[t<<2&63]+"=")),o.join("")}},Ht=[],zt=[],Yt="undefined"!=typeof Uint8Array?Uint8Array:Array,Gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vt=0,Kt=Gt.length;Vt<Kt;++Vt)Ht[Vt]=Gt[Vt],zt[Gt.charCodeAt(Vt)]=Vt;function qt(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function Jt(e,t,n){for(var r,o,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(Ht[(o=r)>>18&63]+Ht[o>>12&63]+Ht[o>>6&63]+Ht[63&o]);return i.join("")}zt["-".charCodeAt(0)]=62,zt["_".charCodeAt(0)]=63;var Zt={}.toString,Xt=Array.isArray||function(e){return"[object Array]"==Zt.call(e)},Qt={read:function(e,t,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,f=-7,d=n?o-1:0,l=n?-1:1,h=e[t+d];for(d+=l,i=h&(1<<-f)-1,h>>=-f,f+=u;f>0;i=256*i+e[t+d],d+=l,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;f>0;a=256*a+e[t+d],d+=l,f-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)},write:function(e,t,n,r,o,i){var a,u,s,c=8*i-o-1,f=(1<<c)-1,d=f>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,w=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+d>=1?l/s:l*Math.pow(2,1-d))*s>=2&&(a++,s/=2),a+d>=f?(u=0,a=f):a+d>=1?(u=(t*s-1)*Math.pow(2,o),a+=d):(u=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&u,h+=p,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*w}},$t={};(function(e){"use strict";function t(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function n(e,n){if(t()<n)throw new RangeError("Invalid typed array length");return r.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(n)).__proto__=r.prototype:(null===e&&(e=new r(n)),e.length=n),e}function r(e,t,n){if(!(r.TYPED_ARRAY_SUPPORT||this instanceof r))return new r(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return a(this,e)}return o(this,e,t,n)}function o(e,t,o,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,o){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o),r.TYPED_ARRAY_SUPPORT?(e=t).__proto__=r.prototype:e=u(e,t),e}(e,t,o,i):"string"==typeof t?function(e,t,o){if("string"==typeof o&&""!==o||(o="utf8"),!r.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var i=0|c(t,o),a=(e=n(e,i)).write(t,o);return a!==i&&(e=e.slice(0,a)),e}(e,t,o):function(e,t){if(r.isBuffer(t)){var o=0|s(t.length);return 0===(e=n(e,o)).length?e:(t.copy(e,0,0,o),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?n(e,0):u(e,t);if("Buffer"===t.type&&Xt(t.data))return u(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function i(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function a(e,t){if(i(t),e=n(e,t<0?0:0|s(t)),!r.TYPED_ARRAY_SUPPORT)for(var o=0;o<t;++o)e[o]=0;return e}function u(e,t){var r=t.length<0?0:0|s(t.length);e=n(e,r);for(var o=0;o<r;o+=1)e[o]=255&t[o];return e}function s(e){if(e>=t())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t().toString(16)+" bytes");return 0|e}function c(e,t){if(r.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(o)return M(e).length;t=(""+t).toLowerCase(),o=!0}}function f(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function d(e,t,n,o,i){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=r.from(t,o)),r.isBuffer(t))return 0===t.length?-1:l(e,t,n,o,i);if("number"==typeof t)return t&=255,r.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):l(e,[t],n,o,i);throw new TypeError("val must be string, number or Buffer")}function l(e,t,n,r,o){var i,a=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var f=-1;for(i=n;i<u;i++)if(c(e,i)===c(t,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===s)return f*a}else-1!==f&&(i-=i-f),f=-1}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var d=!0,l=0;l<s;l++)if(c(e,i+l)!==c(t,l)){d=!1;break}if(d)return i}return-1}function h(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[n+a]=u}return a}function p(e,t,n,r){return x(M(t,e.length-n),e,n,r)}function w(e,t,n,r){return x(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function m(e,t,n,r){return w(e,t,n,r)}function g(e,t,n,r){return x(W(t),e,n,r)}function y(e,t,n,r){return x(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function v(e,t,n){return 0===t&&n===e.length?Ft.fromByteArray(e):Ft.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,u,s,c=e[o],f=null,d=c>239?4:c>223?3:c>191?2:1;if(o+d<=n)switch(d){case 1:c<128&&(f=c);break;case 2:128==(192&(i=e[o+1]))&&(s=(31&c)<<6|63&i)>127&&(f=s);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(s=(15&c)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(f=s);break;case 4:i=e[o+1],a=e[o+2],u=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&u)&&(s=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(f=s)}null===f?(f=65533,d=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),o+=d}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}$t.Buffer=r,$t.INSPECT_MAX_BYTES=50,r.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t(),r.poolSize=8192,r._augment=function(e){return e.__proto__=r.prototype,e},r.from=function(e,t,n){return o(null,e,t,n)},r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0})),r.alloc=function(e,t,r){return function(e,t,r,o){return i(t),t<=0?n(null,t):void 0!==r?"string"==typeof o?n(null,t).fill(r,o):n(null,t).fill(r):n(null,t)}(0,e,t,r)},r.allocUnsafe=function(e){return a(null,e)},r.allocUnsafeSlow=function(e){return a(null,e)},r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,i=0,a=Math.min(n,o);i<a;++i)if(e[i]!==t[i]){n=e[i],o=t[i];break}return n<o?-1:o<n?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Xt(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=r.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!r.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,i),i+=a.length}return o},r.byteLength=c,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},r.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?_(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return b(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return v(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=$t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e,t,n,o,i){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),t<0||n>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&t>=n)return 0;if(o>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(o>>>=0),u=(n>>>=0)-(t>>>=0),s=Math.min(a,u),c=this.slice(o,i),f=e.slice(t,n),d=0;d<s;++d)if(c[d]!==f[d]){a=c[d],u=f[d];break}return a<u?-1:u<a?1:0},r.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},r.prototype.indexOf=function(e,t,n){return d(this,e,t,n,!0)},r.prototype.lastIndexOf=function(e,t,n){return d(this,e,t,n,!1)},r.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return h(this,e,t,n);case"utf8":case"utf-8":return p(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return m(this,e,t,n);case"base64":return g(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function b(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function A(e,t,n){var r,o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var i="",a=t;a<n;++a)i+=(r=e[a])<16?"0"+r.toString(16):r.toString(16);return i}function S(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,n,o,i,a){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function C(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function j(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,o){return o||j(e,0,n,4),Qt.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,o){return o||j(e,0,n,8),Qt.write(e,t,n,r,52,8),n+8}r.prototype.slice=function(e,t){var n,o=this.length;if((e=~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),(t=void 0===t?o:~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),t<e&&(t=e),r.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=r.prototype;else{var i=t-e;n=new r(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},r.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},r.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},r.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},r.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},r.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),Qt.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),Qt.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),Qt.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),Qt.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},r.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):C(this,e,t,!0),t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},r.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);T(this,e,t,n,o-1,-o)}var i=0,a=1,u=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},r.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);T(this,e,t,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):C(this,e,t,!0),t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},r.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var i,a=o-n;if(this===e&&n<t&&t<o)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!r.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},r.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!r.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var u=r.isBuffer(e)?e:M(new r(e,o).toString()),s=u.length;for(a=0;a<n-t;++a)this[a+t]=u[a%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function M(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function W(e){return Ft.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function x(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var en={exports:{}};(function(e,t){var n,r;n="undefined"!=typeof self?self:this,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.js")}({"./node_modules/belter/src/css.js":function(e,t,n){},"./node_modules/belter/src/decorators.js":function(e,t,n){"use strict";n("./node_modules/belter/src/util.js")},"./node_modules/belter/src/device.js":function(e,t,n){"use strict";t.a=function(){return!!(window.navigator.mockUserAgent||window.navigator.userAgent).match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)}},"./node_modules/belter/src/dom.js":function(e,t,n){"use strict";n("./node_modules/zalgo-promise/src/index.js"),n("./node_modules/cross-domain-utils/src/index.js"),n("./node_modules/cross-domain-safe-weakmap/src/index.js");var r=n("./node_modules/belter/src/util.js");n("./node_modules/belter/src/device.js"),t.b=function e(){return Object(r.e)(e,function(){try{if("undefined"==typeof window)return!1;if(window.localStorage){var e=Math.random().toString();window.localStorage.setItem("__test__localStorage__",e);var t=window.localStorage.getItem("__test__localStorage__");if(window.localStorage.removeItem("__test__localStorage__"),e===t)return!0}}catch(e){}return!1})},t.a=function(e,t,n){return e.addEventListener(t,n),{cancel:function(){e.removeEventListener(t,n)}}},"function"==typeof Symbol&&Symbol.iterator,Object.assign,Object.create(Error.prototype)},"./node_modules/belter/src/experiment.js":function(e,t,n){"use strict";n("./node_modules/belter/src/util.js"),n("./node_modules/belter/src/storage.js")},"./node_modules/belter/src/global.js":function(e,t,n){"use strict";n("./node_modules/belter/src/util.js")},"./node_modules/belter/src/http.js":function(e,t,n){"use strict";n("./node_modules/zalgo-promise/src/index.js"),n("./node_modules/cross-domain-utils/src/index.js")},"./node_modules/belter/src/index.js":function(e,t,n){"use strict";n("./node_modules/belter/src/device.js");var r=n("./node_modules/belter/src/dom.js");n.d(t,"addEventListener",function(){return r.a}),n("./node_modules/belter/src/experiment.js"),n("./node_modules/belter/src/global.js"),n("./node_modules/belter/src/storage.js");var o=n("./node_modules/belter/src/util.js");n.d(t,"getOrSet",function(){return o.d}),n.d(t,"isRegex",function(){return o.f}),n.d(t,"memoizePromise",function(){return o.h}),n.d(t,"noop",function(){return o.i}),n.d(t,"once",function(){return o.j}),n.d(t,"safeInterval",function(){return o.m}),n.d(t,"stringifyError",function(){return o.o}),n.d(t,"uniqueID",function(){return o.q}),n.d(t,"weakMapMemoize",function(){return o.r}),n.d(t,"weakMapMemoizePromise",function(){return o.s}),n("./node_modules/belter/src/http.js");var i=n("./node_modules/belter/src/types.js");n.n(i),n("./node_modules/belter/src/decorators.js"),n("./node_modules/belter/src/css.js"),n("./node_modules/belter/src/test.js")},"./node_modules/belter/src/storage.js":function(e,t,n){"use strict";t.a=function e(t){var n=t.name,i=t.version,a=void 0===i?"latest":i,u=t.lifetime,s=void 0===u?3e5:u;return Object(r.e)(e,function(){var e="__"+n+"_"+a+"_storage__",t=void 0;function i(n){var i=Object(o.b)(),a=void 0;if(t&&(a=t),!a&&i){var u=window.localStorage.getItem(e);u&&(a=JSON.parse(u))}a||(a=Object(r.c)()[e]),a||(a={id:Object(r.q)()}),a.id||(a.id=Object(r.q)()),t=a;var s=n(a);return i?window.localStorage.setItem(e,JSON.stringify(a)):Object(r.c)()[e]=a,t=null,s}function u(e){return i(function(t){var n=t.__session__,o=Date.now();return n&&o-n.created>s&&(n=null),n||(n={guid:Object(r.q)(),created:o}),t.__session__=n,e(n)})}return{getState:i,getID:function(){return i(function(e){return e.id})},getSessionState:function(e){return u(function(t){return t.state=t.state||{},e(t.state)})},getSessionID:function(){return u(function(e){return e.guid})}}},[{name:n,version:a,lifetime:s}])};var r=n("./node_modules/belter/src/util.js"),o=n("./node_modules/belter/src/dom.js")},"./node_modules/belter/src/test.js":function(e,t,n){"use strict";n("./node_modules/zalgo-promise/src/index.js"),n("./node_modules/belter/src/util.js")},"./node_modules/belter/src/types.js":function(e,t){},"./node_modules/belter/src/util.js":function(n,r,o){"use strict";r.q=s,r.c=function(){if("undefined"!=typeof window)return window;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("No global found")},r.g=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new a.a;function o(){for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=r.getOrSet(n.thisNamespace?this:e,function(){return{}}),u=f(o),s=n.time;if(a[u]&&s&&Date.now()-a[u].time<s&&delete a[u],a[u])return a[u].value;var c=Date.now(),d=e.apply(this,arguments);return a[u]={time:c,value:d},a[u].value}return o.reset=function(){r.delete(n.thisNamespace?t:e)},n.name&&(o.displayName=n.name+":memoized"),o},r.h=function(e){var t={};function n(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=f(r);return t.hasOwnProperty(i)?t[i]:(t[i]=e.apply(this,arguments).finally(function(){delete t[i]}),t[i])}return n.reset=function(){t={}},n},r.k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function n(){return i.a.try(e,this,arguments)}return t.name&&(n.displayName=t.name+":promisified"),n},r.e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.__inline_memoize_cache__=e.__inline_memoize_cache__||{},o=f(n);return r.hasOwnProperty(o)?r[o]:r[o]=t.apply(void 0,n)},r.i=function(){},r.j=function(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}},r.o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(n>=3)return"stringifyError stack overflow";try{if(!t)return"<unknown error: "+Object.prototype.toString.call(t)+">";if("string"==typeof t)return t;if(t instanceof Error){var r=t&&t.stack,o=t&&t.message;if(r&&o)return-1!==r.indexOf(o)?r:o+"\n"+r;if(r)return r;if(o)return o}return"function"==typeof t.toString?t.toString():Object.prototype.toString.call(t)}catch(t){return"Error while stringifying error: "+e(t,n+1)}},r.n=function(e){return"string"==typeof e?e:e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)},r.b=function(e,t){if(!t)return e;if(Object.assign)return Object.assign(e,t);for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},r.m=function(e,t){var n=void 0;return function r(){n=setTimeout(function(){e(),r()},t)}(),{cancel:function(){clearTimeout(n)}}},r.a=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},r.f=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},o.d(r,"r",function(){return d}),o.d(r,"s",function(){return l}),r.d=function(e,t,n){if(e.hasOwnProperty(t))return e[t];var r=n();return e[t]=r,r},r.p=function(e){var t=void 0,n=void 0;try{t=e()}catch(e){n=e}return{result:t,error:n}},r.l=function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)};var i=o("./node_modules/zalgo-promise/src/index.js"),a=o("./node_modules/cross-domain-safe-weakmap/src/index.js"),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function s(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+function(e){if("function"==typeof btoa)return btoa(e);if(void 0!==t)return t.from(e,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var c=void 0;function f(e){try{return JSON.stringify(Array.prototype.slice.call(e),function(e,t){return"function"==typeof t?"memoize["+function(e){if(c=c||new a.a,null==e||"object"!==(void 0===e?"undefined":u(e))&&"function"!=typeof e)throw new Error("Invalid object");var t=c.get(e);return t||(t=(void 0===e?"undefined":u(e))+":"+s(),c.set(e,t)),t}(t)+"]":t})}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}}var d=function(e){var t=new a.a;return function(n){var r=this;return t.getOrSet(n,function(){return e.call(r,n)})}},l=function(e){var t=new a.a;return function(n){var r=this;return t.getOrSet(n,function(){return e.call(r,n).finally(function(){t.delete(n)})})}}},"./node_modules/cross-domain-safe-weakmap/src/index.js":function(e,t,n){"use strict";n.d({},"WeakMap",function(){return u});var r=n("./node_modules/cross-domain-utils/src/index.js");function o(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}var i=Object.defineProperty,a=Date.now()%1e9,u=function(){function e(){if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),a+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+a,function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var e=new WeakMap,t={};return Object.freeze(t),e.set(t,"__testvalue__"),"__testvalue__"===e.get(t)}catch(e){return!1}}())try{this.weakmap=new WeakMap}catch(e){}this.keys=[],this.values=[]}return e.prototype._cleanupClosedWindows=function(){for(var e=this.weakmap,t=this.keys,n=0;n<t.length;n++){var o=t[n];if(Object(r.isWindow)(o)&&Object(r.isWindowClosed)(o)){if(e)try{e.delete(o)}catch(e){}t.splice(n,1),this.values.splice(n,1),n-=1}}},e.prototype.isSafeToReadWrite=function(e){if(Object(r.isWindow)(e))return!1;try{e&&e.self,e&&e[this.name]}catch(e){return!1}return!0},e.prototype.set=function(e,t){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(e,t)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=this.name,a=e[r];a&&a[0]===e?a[1]=t:i(e,r,{value:[e,t],writable:!0})}else{this._cleanupClosedWindows();var u=this.keys,s=this.values,c=o(u,e);-1===c?(u.push(e),s.push(t)):s[c]=t}},e.prototype.get=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var n=o(this.keys,e);if(-1===n)return;return this.values[n]}var r=e[this.name];if(r&&r[0]===e)return r[1]},e.prototype.delete=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];n&&n[0]===e&&(n[0]=n[1]=void 0)}else{this._cleanupClosedWindows();var r=this.keys,i=o(r,e);-1!==i&&(r.splice(i,1),this.values.splice(i,1))}},e.prototype.has=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return!0}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];return!(!n||n[0]!==e)}return this._cleanupClosedWindows(),-1!==o(this.keys,e)},e.prototype.getOrSet=function(e,t){if(this.has(e))return this.get(e);var n=t();return this.set(e,n),n},e}();n.d(t,"a",function(){return u})},"./node_modules/cross-domain-utils/src/constants.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i});var r={MOCK:"mock:",FILE:"file:",ABOUT:"about:"},o="*",i={IFRAME:"iframe",POPUP:"popup"}},"./node_modules/cross-domain-utils/src/index.js":function(e,t,n){"use strict";var r=n("./node_modules/cross-domain-utils/src/utils.js");n.d(t,"getActualDomain",function(){return r.a}),n.d(t,"getAncestor",function(){return r.b}),n.d(t,"getDomain",function(){return r.c}),n.d(t,"getDomainFromUrl",function(){return r.d}),n.d(t,"getFrameByName",function(){return r.e}),n.d(t,"getOpener",function(){return r.f}),n.d(t,"getParent",function(){return r.g}),n.d(t,"getUserAgent",function(){return r.h}),n.d(t,"isActuallySameDomain",function(){return r.i}),n.d(t,"isAncestor",function(){return r.j}),n.d(t,"isOpener",function(){return r.k}),n.d(t,"isSameDomain",function(){return r.l}),n.d(t,"isSameTopWindow",function(){return r.m}),n.d(t,"isWindow",function(){return r.n}),n.d(t,"isWindowClosed",function(){return r.o}),n.d(t,"linkFrameWindow",function(){return r.p}),n.d(t,"matchDomain",function(){return r.q}),n.d(t,"normalizeMockUrl",function(){return r.r}),n.d(t,"stringifyDomainPattern",function(){return r.s});var o=n("./node_modules/cross-domain-utils/src/types.js");n.n(o),n.o(o,"WINDOW_TYPE")&&n.d(t,"WINDOW_TYPE",function(){return o.WINDOW_TYPE});var i=n("./node_modules/cross-domain-utils/src/constants.js");n.d(t,"WINDOW_TYPE",function(){return i.c})},"./node_modules/cross-domain-utils/src/types.js":function(e,t){},"./node_modules/cross-domain-utils/src/utils.js":function(e,t,n){"use strict";function r(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var o=n("./node_modules/cross-domain-utils/src/constants.js");t.g=u,t.f=s,t.a=f,t.c=d,t.i=l,t.l=h,t.o=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==i}if(t&&h(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent)return!0}catch(e){}var n=function(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}(v,e);if(-1!==n){var r=_[n];if(r&&function(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var t=e.ownerDocument;return!(!t||!t.documentElement||t.documentElement.contains(e))}(r))return!0}return!1},t.p=function(e){if(function(){for(var e=0;e<v.length;e++){var t=!1;try{t=v[e].closed}catch(e){}t&&(_.splice(e,1),v.splice(e,1))}}(),e&&e.contentWindow)try{v.push(e.contentWindow),_.push(e)}catch(e){}},t.h=function(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent},t.e=function(e,t){for(var n=w(e),r=0,o=null==n?0:n.length;r<o;r++){var i=n[r];try{if(h(i)&&i.name===t&&-1!==n.indexOf(i))return i}catch(e){}}try{if(-1!==n.indexOf(e.frames[t]))return e.frames[t]}catch(e){}try{if(-1!==n.indexOf(e[t]))return e[t]}catch(e){}},t.k=function(e,t){return e===s(t)},t.b=E,t.j=function(e,t){var n=E(t);if(n)return n===e;if(t===e)return!1;if(g(t)===t)return!1;for(var r=0,o=w(e),i=null==o?0:o.length;r<i;r++)if(o[r]===t)return!0;return!1},t.m=function(e,t){var n=g(e)||e,r=g(t)||t;try{if(n&&r)return n===r}catch(e){}var o=y(e),i=y(t);if(b(o,i))return!0;var a=s(n),u=s(r);return!(a&&b(y(a),i)||(u&&b(y(u),o),1))},t.q=function e(t,n){if("string"==typeof t){if("string"==typeof n)return t===o.b||n===t;if(r(n))return!1;if(Array.isArray(n))return!1}return r(t)?r(n)?t.toString()===n.toString():!Array.isArray(n)&&Boolean(n.match(t)):!!Array.isArray(t)&&(Array.isArray(n)?JSON.stringify(t)===JSON.stringify(n):!r(n)&&t.some(function(t){return e(t,n)}))},t.s=function(e){return Array.isArray(e)?"("+e.join(" | ")+")":r(e)?"RegExp("+e.toString():e.toString()},t.d=O,t.n=function(e){try{if(e===window)return!0}catch(e){if(e&&e.message===i)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===i)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===i)return!0}try{e&&e.__cross_domain_utils_window_check__}catch(e){return!0}return!1},t.r=function(e){if(0!==O(e).indexOf(o.a.MOCK))return e;throw new Error("Mock urls not supported out of test mode")};var i="Call was rejected by callee.\r\n";function a(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.a.ABOUT}function u(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function s(e){if(e&&!u(e))try{return e.opener}catch(e){}}function c(e){try{return e&&e.location&&e.location.href,!0}catch(e){}return!1}function f(e){var t=(e=e||window).location;if(!t)throw new Error("Can not read window location");var n=t.protocol;if(!n)throw new Error("Can not read window protocol");if(n===o.a.FILE)return o.a.FILE+"//";if(n===o.a.ABOUT){var r=u(e);return r&&c(r)?f(r):o.a.ABOUT+"//"}var i=t.host;if(!i)throw new Error("Can not read window host");return n+"//"+i}function d(e){var t=f(e=e||window);return t&&e.mockDomain&&0===e.mockDomain.indexOf(o.a.MOCK)?e.mockDomain:t}function l(e){try{if(e===window)return!0}catch(e){}try{var t=Object.getOwnPropertyDescriptor(e,"location");if(t&&!1===t.enumerable)return!1}catch(e){}try{if(a(e)&&c(e))return!0}catch(e){}try{if(f(e)===f(window))return!0}catch(e){}return!1}function h(e){if(!l(e))return!1;try{if(e===window)return!0;if(a(e)&&c(e))return!0;if(d(window)===d(e))return!0}catch(e){}return!1}function p(e,t){if(!e||!t)return!1;var n=u(t);return n?n===e:-1!==function(e){var t=[];try{for(;e.parent!==e;)t.push(e.parent),e=e.parent}catch(e){}return t}(t).indexOf(e)}function w(e){var t=[],n=void 0;try{n=e.frames}catch(t){n=e}var r=void 0;try{r=n.length}catch(e){}if(0===r)return t;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=n[o]}catch(e){continue}t.push(i)}return t}for(var a=0;a<100;a++){var u=void 0;try{u=n[a]}catch(e){return t}if(!u)return t;t.push(u)}return t}function m(e){for(var t=[],n=0,r=w(e),o=null==r?0:r.length;n<o;n++){var i=r[n];t.push(i);for(var a=0,u=m(i),s=null==u?0:u.length;a<s;a++){var c=u[a];t.push(c)}}return t}function g(e){if(e){try{if(e.top)return e.top}catch(e){}if(u(e)===e)return e;try{if(p(window,e)&&window.top)return window.top}catch(e){}try{if(p(e,window)&&window.top)return window.top}catch(e){}for(var t=0,n=m(e),r=null==n?0:n.length;t<r;t++){var o=n[t];try{if(o.top)return o.top}catch(e){}if(u(o)===o)return o}}}function y(e){var t=g(e);if(!t)throw new Error("Can not determine top window");return[].concat(m(t),[t])}var v=[],_=[];function E(e){return s(e=e||window)||u(e)||void 0}function b(e,t){for(var n=0,r=null==e?0:e.length;n<r;n++)for(var o=e[n],i=0,a=null==t?0:t.length;i<a;i++)if(o===t[i])return!0;return!1}function O(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):d()}},"./node_modules/zalgo-promise/src/index.js":function(e,t,n){"use strict";function r(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var t={}.toString;if(t){var n=t.call(e);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}function o(){var e=void 0;if("undefined"!=typeof window)e=window;else{if("undefined"==typeof window)throw new TypeError("Can not find global");e=window}var t=e.__zalgopromise__=e.__zalgopromise__||{};return t.flushPromises=t.flushPromises||[],t.activeCount=t.activeCount||0,t.possiblyUnhandledPromiseHandlers=t.possiblyUnhandledPromiseHandlers||[],t.dispatchedErrors=t.dispatchedErrors||[],t}var i=function(){function e(t){var n=this;if(function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var r=void 0,o=void 0,i=!1,a=!1,u=!1;try{t(function(e){u?n.resolve(e):(i=!0,r=e)},function(e){u?n.reject(e):(a=!0,o=e)})}catch(e){return void this.reject(e)}u=!0,i?this.resolve(r):a&&this.reject(o)}}return e.prototype.resolve=function(e){if(this.resolved||this.rejected)return this;if(r(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},e.prototype.reject=function(e){var t=this;if(this.resolved||this.rejected)return this;if(r(e))throw new Error("Can not reject promise with another promise");if(!e){var n=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){t.errorHandled||function(e,t){if(-1===o().dispatchedErrors.indexOf(e)){o().dispatchedErrors.push(e),setTimeout(function(){throw e},1);for(var n=0;n<o().possiblyUnhandledPromiseHandlers.length;n++)o().possiblyUnhandledPromiseHandlers[n](e,t)}}(e,t)},1),this.dispatch(),this},e.prototype.asyncReject=function(e){return this.errorHandled=!0,this.reject(e),this},e.prototype.dispatch=function(){var t=this,n=this.dispatching,i=this.resolved,a=this.rejected,u=this.handlers;if(!n&&(i||a)){this.dispatching=!0,o().activeCount+=1;for(var s=function(n){var o=u[n],s=o.onSuccess,c=o.onError,f=o.promise,d=void 0;if(i)try{d=s?s(t.value):t.value}catch(e){return f.reject(e),"continue"}else if(a){if(!c)return f.reject(t.error),"continue";try{d=c(t.error)}catch(e){return f.reject(e),"continue"}}d instanceof e&&(d.resolved||d.rejected)?(d.resolved?f.resolve(d.value):f.reject(d.error),d.errorHandled=!0):r(d)?d instanceof e&&(d.resolved||d.rejected)?d.resolved?f.resolve(d.value):f.reject(d.error):d.then(function(e){f.resolve(e)},function(e){f.reject(e)}):f.resolve(d)},c=0;c<u.length;c++)s(c);u.length=0,this.dispatching=!1,o().activeCount-=1,0===o().activeCount&&e.flushQueue()}},e.prototype.then=function(t,n){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new e;return this.handlers.push({promise:r,onSuccess:t,onError:n}),this.errorHandled=!0,this.dispatch(),r},e.prototype.catch=function(e){return this.then(void 0,e)},e.prototype.finally=function(t){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.finally expected a function");return this.then(function(n){return e.try(t).then(function(){return n})},function(n){return e.try(t).then(function(){throw n})})},e.prototype.timeout=function(e,t){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){n.resolved||n.rejected||n.reject(t||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){return clearTimeout(r),e})},e.prototype.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},e.resolve=function(t){return t instanceof e?t:r(t)?new e(function(e,n){return t.then(e,n)}):(new e).resolve(t)},e.reject=function(t){return(new e).reject(t)},e.asyncReject=function(t){return(new e).asyncReject(t)},e.all=function(t){var n=new e,o=t.length,i=[];if(!o)return n.resolve(i),n;for(var a=function(a){var u=t[a];if(u instanceof e){if(u.resolved)return i[a]=u.value,o-=1,"continue"}else if(!r(u))return i[a]=u,o-=1,"continue";e.resolve(u).then(function(e){i[a]=e,0==(o-=1)&&n.resolve(i)},function(e){n.reject(e)})},u=0;u<t.length;u++)a(u);return 0===o&&n.resolve(i),n},e.hash=function(t){var n={};return e.all(Object.keys(t).map(function(r){return e.resolve(t[r]).then(function(e){n[r]=e})})).then(function(){return n})},e.map=function(t,n){return e.all(t.map(n))},e.onPossiblyUnhandledException=function(e){return function(e){return o().possiblyUnhandledPromiseHandlers.push(e),{cancel:function(){o().possiblyUnhandledPromiseHandlers.splice(o().possiblyUnhandledPromiseHandlers.indexOf(e),1)}}}(e)},e.try=function(t,n,r){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.try expected a function");var o=void 0;try{o=t.apply(n,r||[])}catch(t){return e.reject(t)}return e.resolve(o)},e.delay=function(t){return new e(function(e){setTimeout(e,t)})},e.isPromise=function(t){return!!(t&&t instanceof e)||r(t)},e.flush=function(){var t=new e;return o().flushPromises.push(t),0===o().activeCount&&e.flushQueue(),t},e.flushQueue=function(){var e=o().flushPromises;o().flushPromises=[];for(var t=0,n=null==e?0:e.length;t<n;t++)e[t].resolve()},e}();n.d(t,"a",function(){return i})},"./src/bridge/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/zalgo-promise/src/index.js"),o=n("./node_modules/cross-domain-utils/src/index.js"),i=n("./node_modules/belter/src/index.js"),a=n("./src/conf/index.js"),u=n("./src/global.js"),s=Object(u.b)("tunnelWindows");function c(){return!!Object(o.getUserAgent)(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function f(e){return!Object(o.isSameTopWindow)(window,e)}function d(e,t){if(e){if(Object(o.getDomain)()!==Object(o.getDomainFromUrl)(e))return!0}else if(t&&!Object(o.isSameDomain)(t))return!0;return!1}function l(e){var t=e.win,n=e.domain;return!(!c()||n&&!d(n,t)||t&&!f(t))}function h(e){var t=(e=e||Object(o.getDomainFromUrl)(e)).replace(/[^a-zA-Z0-9]+/g,"_");return a.a+"_"+t}function p(){return Boolean(window.name&&window.name===h(Object(o.getDomain)()))}u.a.openTunnelToParent=function(e){var t=e.name,n=e.source,r=e.canary,c=e.sendMessage,f=Object(o.getParent)(window);if(!f)throw new Error("No parent window found to open tunnel to");var d=function(e){var t=e.name,n=e.source,r=e.canary,a=e.sendMessage;!function(){for(var e=0,t=s.keys(),n=null==t?0:t.length;e<n;e++){var r=t[e],a=s[r];try{Object(i.noop)(a.source)}catch(e){s.del(r);continue}Object(o.isWindowClosed)(a.source)&&s.del(r)}}();var u=Object(i.uniqueID)();return s.set(u,{name:t,source:n,canary:r,sendMessage:a}),u}({name:t,source:n,canary:r,sendMessage:c});return u.a.send(f,a.d.OPEN_TUNNEL,{name:t,sendMessage:function(){var e=s.get(d);try{Object(i.noop)(e&&e.source)}catch(e){return void s.del(d)}if(e&&e.source&&!Object(o.isWindowClosed)(e.source)){try{e.canary()}catch(e){return}e.sendMessage.apply(this,arguments)}}},{domain:a.i})};var w=new r.a(function(e){if(window.document&&window.document.body)return e(window.document.body);var t=setInterval(function(){if(window.document&&window.document.body)return clearInterval(t),e(window.document.body)},10)}),m=Object(u.c)("remoteWindows");function g(e){m.getOrSet(e,function(){return new r.a})}function y(e){var t=m.get(e);if(!t)throw new Error("Remote window not found");return t}function v(e,t,n){y(e).resolve(function(r,i,a){if(r!==e)throw new Error("Remote window does not match window");if(!Object(o.matchDomain)(i,t))throw new Error("Remote domain "+i+" does not match domain "+t);n(a)})}function _(e,t){y(e).reject(t).catch(i.noop)}function E(e,t,n){var r=Object(o.isOpener)(window,e),i=Object(o.isOpener)(e,window);if(!r&&!i)throw new Error("Can only send messages to and from parent and popup windows");return y(e).then(function(r){return r(e,t,n)})}var b=Object(i.weakMapMemoize)(function(e){return r.a.try(function(){try{var t=Object(o.getFrameByName)(e,h(Object(o.getDomain)()));if(!t)return;return Object(o.isSameDomain)(t)&&t[a.j.POSTROBOT]?t:new r.a(function(e){var n=void 0,r=void 0;n=setInterval(function(){if(t&&Object(o.isSameDomain)(t)&&t[a.j.POSTROBOT])return clearInterval(n),clearTimeout(r),e(t)},100),r=setTimeout(function(){return clearInterval(n),e()},2e3)})}catch(e){}})});function O(){return r.a.try(function(){var e=Object(o.getOpener)(window);if(e&&l({win:e}))return g(e),b(e).then(function(t){return t?window.name?t[a.j.POSTROBOT].openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(e){try{Object(i.noop)(window)}catch(e){return}if(window&&!window.closed)try{u.a.receiveMessage({data:e,origin:this.origin,source:this.source})}catch(e){r.a.reject(e)}}}).then(function(t){var n=t.source,r=t.origin,o=t.data;if(n!==e)throw new Error("Source does not match opener");v(n,r,o.sendMessage)}).catch(function(t){throw _(e,t),t}):_(e,new Error("Can not register with opener: window does not have a name")):_(e,new Error("Can not register with opener: no bridge found in opener"))})})}var A=n("./src/lib/index.js"),S=Object(u.b)("bridges"),I=Object(u.b)("bridgeFrames"),T=Object(u.b)("popupWindowsByName"),R=Object(u.c)("popupWindowsByWin");function C(e,t){return S.has(t||Object(o.getDomainFromUrl)(e))}function j(e,t){return t=t||Object(o.getDomainFromUrl)(e),S.getOrSet(t,function(){return r.a.try(function(){if(Object(o.getDomain)()===t)throw new Error("Can not open bridge on the same domain as current domain: "+t);var n=h(t);if(Object(o.getFrameByName)(window,n))throw new Error("Frame with name "+n+" already exists on page");var i=function(e,t){var n=document.createElement("iframe");return n.setAttribute("name",e),n.setAttribute("id",e),n.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),n.setAttribute("frameborder","0"),n.setAttribute("border","0"),n.setAttribute("scrolling","no"),n.setAttribute("allowTransparency","true"),n.setAttribute("tabindex","-1"),n.setAttribute("hidden","true"),n.setAttribute("title",""),n.setAttribute("role","presentation"),n.src=t,n}(n,e);return I.set(t,i),w.then(function(n){n.appendChild(i);var o=i.contentWindow;return function(e,t){u.a.on(a.d.OPEN_TUNNEL,{window:e,domain:t},function(e){var n=e.origin,o=e.data;if(n!==t)throw new Error("Domain "+t+" does not match origin "+n);if(!o.name)throw new Error("Register window expected to be passed window name");if(!o.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!T.has(o.name))throw new Error("Window with name "+o.name+" does not exist, or was not opened by this window");if(!T.get(o.name).domain)throw new Error("We do not have a registered domain for window "+o.name);if(T.get(o.name).domain!==n)throw new Error("Message origin "+n+" does not matched registered window origin "+T.get(o.name).domain);return v(T.get(o.name).win,t,o.sendMessage),{sendMessage:function(e){if(window&&!window.closed){var t=T.get(o.name);if(t)try{u.a.receiveMessage({data:e,origin:t.domain,source:t.win})}catch(e){r.a.reject(e)}}}}})}(o,t),new r.a(function(e,t){i.onload=e,i.onerror=t}).then(function(){return Object(A.a)(o,a.b.BRIDGE_TIMEOUT,"Bridge "+e)}).then(function(){return o})})})})}function P(e){for(var t=e.win,n=e.name,r=e.domain,i=0,a=T.keys(),u=null==a?0:a.length;i<u;i++){var s=a[i];Object(o.isWindowClosed)(T.get(s).win)&&T.del(s)}var c=R.getOrSet(t,function(){return n?T.getOrSet(n,function(){return{win:t,name:n}}):{win:t}});if(c.win&&c.win!==t)throw new Error("Different window already linked for window: "+(n||"undefined"));if(n){if(c.name&&c.name!==n)throw new Error("Different window already linked for name "+n+": "+c.name);c.name=n,T.set(n,c)}return r&&(c.domain=r,g(t)),R.set(t,c),c}function N(e,t){P({win:e,domain:Object(o.getDomainFromUrl)(t)})}var D=window.open;function M(){for(var e=0,t=I.keys(),n=null==t?0:t.length;e<n;e++){var r=t[e],o=I.get(r);o&&o.parentNode&&o.parentNode.removeChild(o)}I.reset(),S.reset()}window.open=function(e,t,n,r){var i=D.call(this,Object(o.normalizeMockUrl)(e),t,n,r);return i?(P({win:i,name:t,domain:e?Object(o.getDomainFromUrl)(e):null}),i):i},n.d(t,"openTunnelToOpener",function(){return O}),n.d(t,"needsBridgeForBrowser",function(){return c}),n.d(t,"needsBridgeForWin",function(){return f}),n.d(t,"needsBridgeForDomain",function(){return d}),n.d(t,"needsBridge",function(){return l}),n.d(t,"getBridgeName",function(){return h}),n.d(t,"isBridge",function(){return p}),n.d(t,"documentBodyReady",function(){return w}),n.d(t,"registerRemoteWindow",function(){return g}),n.d(t,"findRemoteWindow",function(){return y}),n.d(t,"registerRemoteSendMessage",function(){return v}),n.d(t,"rejectRemoteSendMessage",function(){return _}),n.d(t,"sendBridgeMessage",function(){return E}),n.d(t,"hasBridge",function(){return C}),n.d(t,"openBridge",function(){return j}),n.d(t,"linkWindow",function(){return P}),n.d(t,"linkUrl",function(){return N}),n.d(t,"destroyBridges",function(){return M})},"./src/bridge/interface.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/bridge/index.js");n.d(t,"openBridge",function(){return r.openBridge}),n.d(t,"linkWindow",function(){return r.linkWindow}),n.d(t,"linkUrl",function(){return r.linkUrl}),n.d(t,"isBridge",function(){return r.isBridge}),n.d(t,"needsBridge",function(){return r.needsBridge}),n.d(t,"needsBridgeForBrowser",function(){return r.needsBridgeForBrowser}),n.d(t,"hasBridge",function(){return r.hasBridge}),n.d(t,"needsBridgeForWin",function(){return r.needsBridgeForWin}),n.d(t,"needsBridgeForDomain",function(){return r.needsBridgeForDomain}),n.d(t,"openTunnelToOpener",function(){return r.openTunnelToOpener}),n.d(t,"destroyBridges",function(){return r.destroyBridges})},"./src/conf/index.js":function(e,t,n){"use strict";var r,o={REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},i={SUCCESS:"success",ERROR:"error"},a={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},u={POSTROBOT:"__postRobot__"},s={POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},c={MOCK:"mock:",FILE:"file:"},f={CROSS_DOMAIN_ZALGO_PROMISE:"cross_domain_zalgo_promise",CROSS_DOMAIN_FUNCTION:"cross_domain_function",CROSS_DOMAIN_WINDOW:"cross_domain_window"},d={BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:2e3,ACK_TIMEOUT_KNOWN:1e4,RES_TIMEOUT:-1,ALLOWED_POST_MESSAGE_METHODS:(r={},r[s.POST_MESSAGE]=!0,r[s.BRIDGE]=!0,r[s.GLOBAL]=!0,r)};n.d(t,"b",function(){return d}),n.d(t,"e",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"j",function(){return u}),n.d(t,"g",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"a",function(){return"__postrobot_bridge__"}),n.d(t,!1,function(){return"__postrobot_proxy__"}),n.d(t,"i",function(){return"*"}),n.d(t,"h",function(){return f})},"./src/global.js":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),t.c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;function n(e){return u.getOrSet(e,t)}return{has:function(t){return n(t).hasOwnProperty(e)},get:function(t,r){var o=n(t);return o.hasOwnProperty(e)?o[e]:r},set:function(t,r){return n(t)[e]=r,r},del:function(t){delete n(t)[e]},getOrSet:function(t,r){var o=n(t);if(o.hasOwnProperty(e))return o[e];var i=r();return o[e]=i,i}}},t.b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=Object(o.getOrSet)(a,e,t);return{has:function(e){return n.hasOwnProperty(e)},get:function(e,t){return n.hasOwnProperty(e)?n[e]:t},set:function(e,t){return n[e]=t,t},del:function(e){delete n[e]},getOrSet:function(e,t){if(n.hasOwnProperty(e))return n[e];var r=t();return n[e]=r,r},reset:function(){n=t()},keys:function(){return Object.keys(n)}}},n("./node_modules/cross-domain-utils/src/index.js");var r=n("./node_modules/cross-domain-safe-weakmap/src/index.js"),o=n("./node_modules/belter/src/index.js"),i=n("./src/conf/index.js"),a=window[i.j.POSTROBOT]=window[i.j.POSTROBOT]||{},u=a.windowStore=a.windowStore||new r.a,s=function(){return{}}},"./src/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};n.d(r,"markWindowKnown",function(){return i.e}),n.d(r,"serializeMessage",function(){return P}),n.d(r,"deserializeMessage",function(){return N}),n.d(r,"ProxyWindow",function(){return A}),n.d(r,"cleanUpWindow",function(){return he}),n.d(r,"Promise",function(){return v.a}),n.d(r,"bridge",function(){return pe}),n.d(r,"parent",function(){return le}),n.d(r,"send",function(){return re}),n.d(r,"requestPromises",function(){return te}),n.d(r,"request",function(){return ne}),n.d(r,"sendToParent",function(){return oe}),n.d(r,"client",function(){return ie}),n.d(r,"on",function(){return se}),n.d(r,"listen",function(){return ue}),n.d(r,"once",function(){return ce}),n.d(r,"listener",function(){return fe}),n.d(r,"CONFIG",function(){return s.b}),n.d(r,"disable",function(){return de});var o,i=n("./src/lib/index.js"),a=n("./node_modules/cross-domain-utils/src/index.js"),u=n("./node_modules/belter/src/index.js"),s=n("./src/conf/index.js"),c={FUNCTION:"function",ERROR:"error",PROMISE:"promise",REGEX:"regex",DATE:"date",ARRAY:"array",OBJECT:"object",STRING:"string",NUMBER:"number",BOOLEAN:"boolean",NULL:"null",UNDEFINED:"undefined"},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function d(e){return"object"===(void 0===e?"undefined":f(e))&&null!==e&&"string"==typeof e.__type__}function l(e){return void 0===e?c.UNDEFINED:null===e?c.NULL:Array.isArray(e)?c.ARRAY:"function"==typeof e?c.FUNCTION:"object"===(void 0===e?"undefined":f(e))?e instanceof Error?c.ERROR:"function"==typeof e.then?c.PROMISE:"[object RegExp]"===Object.prototype.toString.call(e)?c.REGEX:"[object Date]"===Object.prototype.toString.call(e)?c.DATE:c.OBJECT:"string"==typeof e?c.STRING:"number"==typeof e?c.NUMBER:"boolean"==typeof e?c.BOOLEAN:void 0}function h(e,t){return{__type__:e,__val__:t}}var p,w=((o={})[c.FUNCTION]=function(){},o[c.ERROR]=function(e){var t=e.message,n=e.stack,r=e.code;return h(c.ERROR,{message:t,stack:n,code:r})},o[c.PROMISE]=function(){},o[c.REGEX]=function(e){return h(c.REGEX,e.source)},o[c.DATE]=function(e){return h(c.DATE,e.toJSON())},o[c.ARRAY]=function(e){return e},o[c.OBJECT]=function(e){return e},o[c.STRING]=function(e){return e},o[c.NUMBER]=function(e){return e},o[c.BOOLEAN]=function(e){return e},o[c.NULL]=function(e){return e},o),m={},g=((p={})[c.FUNCTION]=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},p[c.ERROR]=function(e){var t=e.message,n=e.stack,r=e.code,o=new Error(t);return o.code=r,o.stack=n+"\n\n"+o.stack,o},p[c.PROMISE]=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},p[c.REGEX]=function(e){return new RegExp(e)},p[c.DATE]=function(e){return new Date(e)},p[c.ARRAY]=function(e){return e},p[c.OBJECT]=function(e){return e},p[c.STRING]=function(e){return e},p[c.NUMBER]=function(e){return e},p[c.BOOLEAN]=function(e){return e},p[c.NULL]=function(e){return e},p),y={},v=n("./node_modules/zalgo-promise/src/index.js"),_=n("./src/global.js"),E=Object(_.c)("winToProxyWindow"),b=Object(_.b)("idToProxyWindow");function O(){for(var e=0,t=b.keys(),n=null==t?0:t.length;e<n;e++){var r=t[e];b.get(r).shouldClean()&&b.del(r)}}var A=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.isProxyWindow=!0,this.serializedWindow=t,this.actualWindowPromise=new v.a,n&&this.setWindow(n),this.serializedWindow.getInstanceID=Object(u.memoizePromise)(this.serializedWindow.getInstanceID)}return e.prototype.getType=function(){return this.serializedWindow.type},e.prototype.isPopup=function(){return this.getType()===a.WINDOW_TYPE.POPUP},e.prototype.isIframe=function(){return this.getType()===a.WINDOW_TYPE.IFRAME},e.prototype.setLocation=function(e){var t=this;return v.a.try(function(){if(!t.actualWindow)return t.serializedWindow.setLocation(e);t.actualWindow.location=e}).then(function(){return t})},e.prototype.setName=function(e){var t=this;return v.a.try(function(){if(!t.actualWindow)return t.serializedWindow.setName(e);if(!Object(a.isSameDomain)(t.actualWindow))throw new Error("Can not set name for window on different domain");t.actualWindow.name=e,t.actualWindow.frameElement&&t.actualWindow.frameElement.setAttribute("name",e),(0,n("./src/bridge/index.js").linkWindow)({win:t.actualWindow,name:e})}).then(function(){return t})},e.prototype.close=function(){var e=this;return v.a.try(function(){if(!e.actualWindow)return e.serializedWindow.close();e.actualWindow.close()}).then(function(){return e})},e.prototype.focus=function(){var e=this;return v.a.try(function(){return e.actualWindow&&e.actualWindow.focus(),e.serializedWindow.focus()}).then(function(){return e})},e.prototype.isClosed=function(){var e=this;return v.a.try(function(){return e.actualWindow?Object(a.isWindowClosed)(e.actualWindow):e.serializedWindow.isClosed()})},e.prototype.getWindow=function(){return this.actualWindow},e.prototype.setWindow=function(e){this.actualWindow=e,this.actualWindowPromise.resolve(e)},e.prototype.awaitWindow=function(){return this.actualWindowPromise},e.prototype.matchWindow=function(e){var t=this;return v.a.try(function(){return t.actualWindow?e===t.actualWindow:v.a.all([t.getInstanceID(),Object(i.b)(e)]).then(function(n){var r=n[0]===n[1];return r&&t.setWindow(e),r})})},e.prototype.unwrap=function(){return this.actualWindow||this},e.prototype.getInstanceID=function(){return this.actualWindow?Object(i.b)(this.actualWindow):this.serializedWindow.getInstanceID()},e.prototype.serialize=function(){return this.serializedWindow},e.prototype.shouldClean=function(){return this.actualWindow&&Object(a.isWindowClosed)(this.actualWindow)},e.unwrap=function(t){return e.isProxyWindow(t)?t.unwrap():t},e.serialize=function(t){return O(),e.toProxyWindow(t).serialize()},e.deserialize=function(t){return O(),b.getOrSet(t.id,function(){return new e(t)})},e.isProxyWindow=function(e){return Boolean(e&&!Object(a.isWindow)(e)&&e.isProxyWindow)},e.toProxyWindow=function(t){return O(),e.isProxyWindow(t)?t:E.getOrSet(t,function(){var r=Object(u.uniqueID)();return b.set(r,new e({id:r,type:Object(a.getOpener)(t)?a.WINDOW_TYPE.POPUP:a.WINDOW_TYPE.IFRAME,getInstanceID:function(){return Object(i.b)(t)},close:function(){return v.a.try(function(){t.close()})},focus:function(){return v.a.try(function(){t.focus()})},isClosed:function(){return v.a.try(function(){return Object(a.isWindowClosed)(t)})},setLocation:function(e){return v.a.try(function(){if(Object(a.isSameDomain)(t))try{if(t.location&&"function"==typeof t.location.replace)return void t.location.replace(e)}catch(e){}t.location=e})},setName:function(e){return v.a.try(function(){(0,n("./src/bridge/index.js").linkWindow)({win:t,name:e}),t.name=e})}},t))})},e}(),S=Object(_.c)("methodStore"),I=Object(_.b)("proxyWindowMethods");function T(e,t,n,r,o){A.isProxyWindow(r)?I.set(e,{val:t,name:n,domain:o,source:r}):(I.del(e),S.getOrSet(r,function(){return{}})[e]={domain:o,name:n,val:t,source:r})}function R(e,t){return S.getOrSet(e,function(){return{}})[t]||I.get(t)}_.a.listeningForFunctions=_.a.listeningForFunctions||!1;var C=Object(u.once)(function(){_.a.listeningForFunctions||(_.a.listeningForFunctions=!0,_.a.on(s.d.METHOD,{origin:s.i},function(e){var t=e.source,n=e.origin,r=e.data,o=r.id,i=r.name;return v.a.try(function(){var e=R(t,o);if(!e)throw new Error("Could not find method '"+r.name+"' with id: "+r.id+" in "+Object(a.getDomain)(window));var s=e.source,c=e.domain,f=e.val;return v.a.try(function(){if(!Object(a.matchDomain)(c,n))throw new Error("Method '"+r.name+"' domain "+JSON.stringify(Object(u.isRegex)(e.domain)?e.domain.source:e.domain)+" does not match origin "+n+" in "+Object(a.getDomain)(window));if(A.isProxyWindow(s))return s.matchWindow(t).then(function(e){if(!e)throw new Error("Method call '"+r.name+"' failed - proxy window does not match source in "+Object(a.getDomain)(window))})}).then(function(){return f.apply({source:t,origin:n},r.args)},function(e){return v.a.try(function(){if(f.onError)return f.onError(e)}).then(function(){throw e})}).then(function(e){return{result:e,id:o,name:i}})})}))});function j(e,t,n,r){C();var o=n.__id__||Object(u.uniqueID)();e=A.unwrap(e);var i=n.__name__||n.name||r;return A.isProxyWindow(e)?(T(o,n,i,e,t),e.awaitWindow().then(function(e){T(o,n,i,e,t)})):T(o,n,i,e,t),h(s.h.CROSS_DOMAIN_FUNCTION,{id:o,name:i})}function P(e,t,n){var r;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,n=JSON.stringify(e,function(e){var n=this[e];if(d(this))return n;var r=l(n);if(!r)return n;var o=t[r]||w[r];return o?o(n,e):n});return void 0===n?c.UNDEFINED:n}(n,((r={})[c.PROMISE]=function(n,r){return function(e,t,n,r){return h(s.h.CROSS_DOMAIN_ZALGO_PROMISE,{then:j(e,t,function(e,t){return n.then(e,t)},r)})}(e,t,n,r)},r[c.FUNCTION]=function(n,r){return j(e,t,n,r)},r[c.OBJECT]=function(e){return Object(a.isWindow)(e)||A.isProxyWindow(e)?(t=e,h(s.h.CROSS_DOMAIN_WINDOW,A.serialize(t))):e;var t},r))}function N(e,t,n){var r;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;if(e!==c.UNDEFINED)return JSON.parse(e,function(e,n){if(d(this))return n;var r=void 0,o=void 0;if(d(n)?(r=n.__type__,o=n.__val__):(r=l(n),o=n),!r)return o;var i=t[r]||g[r];return i?i(o,e):o})}(n,((r={})[s.h.CROSS_DOMAIN_ZALGO_PROMISE]=function(e){return t=e.then,new v.a(t);var t},r[s.h.CROSS_DOMAIN_FUNCTION]=function(n){return function(e,t,n){var r=n.id,o=n.name,i=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function i(){var u=arguments;return A.toProxyWindow(e).awaitWindow().then(function(e){var c=R(e,r);return c&&c.val!==i?c.val.apply({source:window,origin:Object(a.getDomain)()},u):_.a.send(e,s.d.METHOD,{id:r,name:o,args:Array.prototype.slice.call(u)},{domain:t,fireAndForget:n.fireAndForget}).then(function(e){if(!n.fireAndForget)return e.data.result})}).catch(function(e){throw e})}return i.__name__=o,i.__origin__=t,i.__source__=e,i.__id__=r,i.origin=t,i},u=i();return u.fireAndForget=i({fireAndForget:!0}),u}(e,t,n)},r[s.h.CROSS_DOMAIN_WINDOW]=function(e){return t=e,A.deserialize(t);var t},r))}var D={};D[s.g.POST_MESSAGE]=function(e,t,n){(Array.isArray(n)?n:"string"==typeof n?[n]:[s.i]).map(function(t){if(0===t.indexOf(s.f.MOCK)){if(window.location.protocol===s.f.FILE)return s.i;if(!Object(a.isActuallySameDomain)(e))throw new Error("Attempting to send messsage to mock domain "+t+", but window is actually cross-domain");return Object(a.getActualDomain)(e)}return 0===t.indexOf(s.f.FILE)?s.i:t}).forEach(function(n){return e.postMessage(t,n)})};var M=n("./src/bridge/index.js"),W=M.sendBridgeMessage,x=M.needsBridgeForBrowser,U=M.isBridge;D[s.g.BRIDGE]=function(e,t,n){if(x()||U()){if(Object(a.isSameDomain)(e))throw new Error("Post message through bridge disabled between same domain windows");if(!1!==Object(a.isSameTopWindow)(window,e))throw new Error("Can only use bridge to communicate between two different windows, not between frames");return W(e,n,t)}},D[s.g.GLOBAL]=function(e,t){if(Object(i.f)()){if(!Object(a.isSameDomain)(e))throw new Error("Post message through global disabled between different domain windows");if(!1!==Object(a.isSameTopWindow)(window,e))throw new Error("Can only use global to communicate between two different windows, not between frames");var n=e[s.j.POSTROBOT];if(!n)throw new Error("Can not find postRobot global on foreign window");return n.receiveMessage({source:window,origin:Object(a.getDomain)(),data:t})}};var k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function L(e,t,n){return v.a.try(function(){var r;if(Object(a.isWindowClosed)(e))throw new Error("Window is closed");var o=P(e,t,((r={})[s.j.POSTROBOT]=k({id:Object(u.uniqueID)()},n),r)),i=[];return v.a.map(Object.keys(D),function(n){return v.a.try(function(){if(!s.b.ALLOWED_POST_MESSAGE_METHODS[n])throw new Error("Strategy disallowed: "+n);return D[n](e,o,t)}).then(function(){return i.push(n+": success"),!0},function(e){return i.push(n+": "+Object(u.stringifyError)(e)+"\n"),!1})}).then(function(e){var t=e.some(Boolean),r=n.type+" "+n.name+" "+(t?"success":"error")+":\n  - "+i.join("\n  - ")+"\n";if(!t)throw new Error(r)})})}var B=Object(_.b)("responseListeners"),F=Object(_.c)("requestListeners"),H=Object(_.b)("erroredResponseListeners");_.a.WINDOW_WILDCARD=_.a.WINDOW_WILDCARD||new function(){};var z,Y="__domain_regex__";function G(e){return B.get(e)}function V(e){B.del(e)}function K(e){return H.has(e)}function q(e){var t=e.name,n=e.win,r=e.domain;if(n===s.i&&(n=null),r===s.i&&(r=null),!t)throw new Error("Name required to get request listener");for(var o=0,i=[n,_.a.WINDOW_WILDCARD],u=null==i?0:i.length;o<u;o++){var c=i[o];if(c){var f=F.get(c);if(f){var d=f[t];if(d){if(r&&"string"==typeof r){if(d[r])return d[r];if(d[Y])for(var l=0,h=d[Y],p=null==h?0:h.length;l<p;l++){var w=h[l],m=w.regex,g=w.listener;if(Object(a.matchDomain)(m,r))return g}}if(d[s.i])return d[s.i]}}}}}var J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z=((z={})[s.e.REQUEST]=function(e,t,n){var r=q({name:n.name,win:e,domain:t});function o(r,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.fireAndForget||Object(a.isWindowClosed)(e)?v.a.resolve():L(e,t,J({type:r,ack:o,hash:n.hash,name:n.name},i))}return n.name===s.d.METHOD&&n.data&&"string"==typeof n.data.name?n.data.name:n.name,v.a.all([o(s.e.ACK),v.a.try(function(){if(!r)throw new Error("No handler found for post message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(a.matchDomain)(r.domain,t))throw new Error("Request origin "+t+" does not match domain "+r.domain.toString());var o=n.data;return r.handler({source:e,origin:t,data:o})}).then(function(e){return o(s.e.RESPONSE,s.c.SUCCESS,{data:e})},function(e){return o(s.e.RESPONSE,s.c.ERROR,{error:e})})]).then(u.noop).catch(function(e){if(r&&r.handleError)return r.handleError(e);throw e})},z[s.e.ACK]=function(e,t,n){if(!K(n.hash)){var r=G(n.hash);if(!r)throw new Error("No handler found for post message ack for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(a.matchDomain)(r.domain,t))throw new Error("Ack origin "+t+" does not match domain "+r.domain.toString());r.ack=!0}},z[s.e.RESPONSE]=function(e,t,n){if(!K(n.hash)){var r=G(n.hash);if(!r)throw new Error("No handler found for post message response for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(a.matchDomain)(r.domain,t))throw new Error("Response origin "+t+" does not match domain "+Object(a.stringifyDomainPattern)(r.domain));if(V(n.hash),n.ack===s.c.ERROR)return r.respond(n.error,null);if(n.ack===s.c.SUCCESS){var o=n.data;return r.respond(null,{source:e,origin:t,data:o})}}},z),X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q=Object(_.b)("receivedMessages");function $(e){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var t=e.source,n=e.origin,r=function(e,t,n){var r=void 0;try{r=N(t,n,e)}catch(e){return}if(r&&"object"===(void 0===r?"undefined":X(r))&&null!==r&&(r=r[s.j.POSTROBOT])&&"object"===(void 0===r?"undefined":X(r))&&null!==r&&r.type&&"string"==typeof r.type&&Z[r.type])return r}(e.data,t,n);r&&(Object(i.e)(t),Q.has(r.id)||(Q.set(r.id,!0),Object(a.isWindowClosed)(t)&&!r.fireAndForget||Z[r.type](t,n,r)))}function ee(e){try{Object(u.noop)(e.source)}catch(e){return}var t={source:e.source||e.sourceElement,origin:e.origin||e.originalEvent&&e.originalEvent.origin,data:e.data};if(t.source){if(!t.origin)throw new Error("Post message did not have origin domain");$(t)}}_.a.receiveMessage=$;var te=Object(_.c)("requestPromises");function ne(e){return v.a.try(function(){if(!e.name)throw new Error("Expected options.name");var t=e.name,n=void 0,r=void 0;if("string"==typeof e.window){var o=document.getElementById(e.window);if(!o)throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be a valid element id");if("iframe"!==o.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(!o.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n=o.contentWindow}else if(e.window instanceof HTMLIFrameElement){if("iframe"!==e.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(e.window&&!e.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e.window&&e.window.contentWindow&&(n=e.window.contentWindow)}else n=e.window;if(!n)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var c=n;r=e.domain||s.i;var f=e.name+"_"+Object(u.uniqueID)();if(Object(a.isWindowClosed)(c))throw new Error("Target window is closed");var d=!1,l=te.getOrSet(c,function(){return[]}),h=v.a.try(function(){if(Object(a.isAncestor)(window,c))return Object(i.a)(c,e.timeout||s.b.CHILD_WINDOW_TIMEOUT)}).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).domain;if(Object(u.isRegex)(r)&&!e)return Object(i.g)(c)}).then(function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).domain;if(Object(u.isRegex)(r)){if(!Object(a.matchDomain)(r,n))throw new Error("Remote window domain "+n+" does not match regex: "+r.toString());r=n}if("string"!=typeof r&&!Array.isArray(r))throw new TypeError("Expected domain to be a string or array");var o=r;return t===s.d.METHOD&&e.data&&"string"==typeof e.data.name&&e.data.name,new v.a(function(n,r){var u=void 0;if(e.fireAndForget||function(e,t){B.set(e,t)}(f,u={name:t,window:c,domain:o,respond:function(e,t){e||(d=!0,l.splice(l.indexOf(h,1))),e?r(e):n(t)}}),L(c,o,{type:s.e.REQUEST,hash:f,name:t,data:e.data,fireAndForget:Boolean(e.fireAndForget)}).catch(r),e.fireAndForget)return n();var p=Object(i.d)(c)?s.b.ACK_TIMEOUT_KNOWN:s.b.ACK_TIMEOUT,w=e.timeout||s.b.RES_TIMEOUT,m=p,g=w,y=100;setTimeout(function e(){if(!d){if(Object(a.isWindowClosed)(c))return u.ack?r(new Error("Window closed for "+t+" before response")):r(new Error("Window closed for "+t+" before ack"));if(m=Math.max(m-y,0),-1!==g&&(g=Math.max(g-y,0)),u.ack){if(-1===g)return;y=Math.min(g,2e3)}else{if(0===m)return r(new Error("No ack for postMessage "+t+" in "+Object(a.getDomain)()+" in "+p+"ms"));if(0===g)return r(new Error("No response for postMessage "+t+" in "+Object(a.getDomain)()+" in "+w+"ms"))}setTimeout(e,y)}},y)})});return h.catch(function(){!function(e){H.set(e,!0)}(f),V(f)}),l.push(h),h})}function re(e,t,n,r){return(r=r||{}).window=e,r.name=t,r.data=n,ne(r)}function oe(e,t,n){var r=Object(a.getAncestor)();return r?re(r,e,t,n):new v.a(function(e,t){return t(new Error("Window does not have a parent"))})}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.window)throw new Error("Expected options.window");var t=e.window;return{send:function(n,r){return re(t,n,r,e)}}}_.a.send=re;var ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function ue(e){if(!e.name)throw new Error("Expected options.name");if(!e.handler)throw new Error("Expected options.handler");var t=e.name,n=e.window,r=e.domain,o={handler:e.handler,handleError:e.errorHandler||function(e){throw e},window:n,domain:r||s.i,name:t},i=function e(t,n){var r=t.name,o=t.win,i=t.domain;if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var a=[],c=0,f=o,d=null==f?0:f.length;c<d;c++){var l=f[c];a.push(e({name:r,domain:i,win:l},n))}return{cancel:function(){for(var e=0,t=null==a?0:a.length;e<t;e++)a[e].cancel()}}}if(Array.isArray(i)){for(var h=[],p=0,w=i,m=null==w?0:w.length;p<m;p++){var g=w[p];h.push(e({name:r,win:o,domain:g},n))}return{cancel:function(){for(var e=0,t=null==h?0:h.length;e<t;e++)h[e].cancel()}}}var y=q({name:r,win:o,domain:i});if(o&&o!==s.i||(o=_.a.WINDOW_WILDCARD),i=i||s.i,y)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===_.a.WINDOW_WILDCARD?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===_.a.WINDOW_WILDCARD?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var v=F.getOrSet(o,function(){return{}}),E=Object(u.getOrSet)(v,r,function(){return{}}),b=i.toString(),O=void 0,A=void 0;return Object(u.isRegex)(i)?(O=Object(u.getOrSet)(E,Y,function(){return[]}),A={regex:i,listener:n},O.push(A)):E[b]=n,{cancel:function(){delete E[b],A&&(O.splice(O.indexOf(A,1)),O.length||delete E[Y]),Object.keys(E).length||delete v[r],o&&!Object.keys(v).length&&F.del(o)}}}({name:t,win:n,domain:r},o);if(e.once){var c=o.handler;o.handler=Object(u.once)(function(){return i.cancel(),c.apply(this,arguments)})}if(o.window&&e.errorOnClose)var f=Object(u.safeInterval)(function(){n&&"object"===(void 0===n?"undefined":ae(n))&&Object(a.isWindowClosed)(n)&&(f.cancel(),o.handleError(new Error("Post message target window is closed")))},50);return{cancel:function(){i.cancel()}}}function se(e,t,n){return"function"==typeof t&&(n=t,t={}),(t=t||{}).name=e,t.handler=n||t.handler,ue(t)}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"function"==typeof t&&(n=t,t={}),t=t||{},n=n||t.handler;var r=t.errorHandler,o=new v.a(function(o,i){(t=t||{}).name=e,t.once=!0,t.handler=function(e){if(o(e),n)return n(e)},t.errorHandler=function(e){if(i(e),r)return r(e)}}),i=ue(t);return o.cancel=i.cancel,o}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(t,n){return se(t,e,n)}}}function de(){delete window[s.j.POSTROBOT],window.removeEventListener("message",ee)}_.a.on=se;var le=Object(a.getAncestor)();function he(e){for(var t=0,n=te.get(e,[]),r=null==n?0:n.length;t<r;t++)n[t].reject(new Error("Window cleaned up before response")).catch(u.noop)}var pe=n("./src/bridge/interface.js");_.a.initialized||(_.a.initialized=!0,Object(u.addEventListener)(window,"message",ee),pe&&pe.openTunnelToOpener(),Object(i.c)()),n.d(t,"markWindowKnown",function(){return i.e}),n.d(t,"serializeMessage",function(){return P}),n.d(t,"deserializeMessage",function(){return N}),n.d(t,"ProxyWindow",function(){return A}),n.d(t,"cleanUpWindow",function(){return he}),n.d(t,"Promise",function(){return v.a}),n.d(t,"bridge",function(){return pe}),n.d(t,"parent",function(){return le}),n.d(t,"send",function(){return re}),n.d(t,"requestPromises",function(){return te}),n.d(t,"request",function(){return ne}),n.d(t,"sendToParent",function(){return oe}),n.d(t,"client",function(){return ie}),n.d(t,"on",function(){return se}),n.d(t,"listen",function(){return ue}),n.d(t,"once",function(){return ce}),n.d(t,"listener",function(){return fe}),n.d(t,"CONFIG",function(){return s.b}),n.d(t,"disable",function(){return de}),t.default=r},"./src/lib/index.js":function(e,t,n){"use strict";var r=n("./node_modules/cross-domain-utils/src/index.js"),o=n("./node_modules/zalgo-promise/src/index.js"),i=n("./node_modules/belter/src/index.js"),a=n("./src/conf/index.js"),u=n("./src/global.js");u.a.instanceID=u.a.instanceID||Object(i.uniqueID)();var s=Object(u.c)("helloPromises");function c(e){return s.getOrSet(e,function(){return new o.a})}var f=Object(i.once)(function(){u.a.on(a.d.HELLO,{domain:a.i},function(e){var t=e.source,n=e.origin;return c(t).resolve({win:t,domain:n}),{instanceID:u.a.instanceID}})});function d(e){return u.a.send(e,a.d.HELLO,{instanceID:u.a.instanceID},{domain:a.i,timeout:-1}).then(function(t){var n=t.origin,r=t.data.instanceID;return c(e).resolve({win:e,domain:n}),{win:e,domain:n,instanceID:r}})}var l=Object(i.weakMapMemoizePromise)(function(e){return d(e).then(function(e){return e.instanceID})});function h(){f();var e=Object(r.getAncestor)();e&&d(e).catch(i.noop)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",r=c(e);return-1!==t&&(r=r.timeout(t,new Error(n+" did not load after "+t+"ms"))),r}function w(){return!!Object(r.getUserAgent)(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i)}var m=Object(u.c)("knownWindows");function g(e){m.set(e,!0)}function y(e){return m.get(e,!1)}n.d(t,"g",function(){return d}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return p}),n.d(t,"f",function(){return w}),n.d(t,"e",function(){return g}),n.d(t,"d",function(){return y})}})},"object"==typeof en.exports?en.exports=r():"function"==typeof define&&define.amd?define("postRobot",[],r):"object"==typeof en.exports?en.exports.postRobot=r():n.postRobot=r()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},$t.Buffer),en=en.exports;var tn={};Object.defineProperty(tn,"__esModule",{value:!0});var nn={error:"verification_cancelled",error_description:"Verification cancelled",transaction_id:void 0};tn.default={COMMUNICATION_EVENT_NAME:"digitalid:communication",STILL_ALIVE_EVENT_NAME:"digitalid:still_alive",actions:{LOAD_COMPLETE:"loadComplete",KEEP_ALIVE:"keepAlive",VERIFICATION_COMPLETE:"verificationComplete",GET_CONTEXT:"getContext"},errors:{cancelled:nn},windowClosedMessage:{action:"verificationComplete",data:nn}};var rn={};Object.defineProperty(rn,"__esModule",{value:!0});var on=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),an=cn(en),un=cn(tn),sn=cn(Ct);function cn(e){return e&&e.__esModule?e:{default:e}}var fn=function(){function e(t){var n=t.onLoadComplete,r=t.onComplete,o=t.onKeepAlive,i=t.onError,a=t.getContext;!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.onLoadComplete=n,this.onComplete=r,this.onKeepAlive=o,this.onError=i,this.getContext=a,this.config=sn.default.getConfig(),this.isIE11&&this.createPostRobotBridge(),an.default.CONFIG.ACK_TIMEOUT=1e4,an.default.CONFIG.BRIDGE_TIMEOUT=1e4,an.default.CONFIG.CHILD_WINDOW_TIMEOUT=1e4,an.default.CONFIG.RES_TIMEOUT=1e4}return on(e,[{key:"createPostRobotBridge",value:function(){var e=this.config.postMessageBridgeWebUrl+"/bridge";console.log("Opening the bridge at: ",e),an.default.bridge.openBridge(e)}},{key:"listen",value:function(e){this.verificationComplete=!1,this.popupWindow=e;try{this.postRobotListener=an.default.on(un.default.COMMUNICATION_EVENT_NAME,this.onMessage.bind(this))}catch(e){console.warn("Cannot create listener... A popup window might already be open.",e.message)}}},{key:"onMessage",value:function(e){if(this.verificationComplete||!this.isMessageOriginOk(e))throw new Error("Invalide message");var t=e.data.message||e.data;switch(t.action){case un.default.actions.LOAD_COMPLETE:return this.handleLoadComplete();case un.default.actions.KEEP_ALIVE:return this.handleKeepAlive();case un.default.actions.VERIFICATION_COMPLETE:return this.handleVerificationComplete(t);case un.default.actions.GET_CONTEXT:return this.getContext();default:return this.handleError(t)}}},{key:"isMessageOriginOk",value:function(e){var t=e.origin||e.originalEvent.origin;return this.config.envDomain.split(",").some(function(e){return e===t})}},{key:"handleLoadComplete",value:function(){"function"!=typeof this.onLoadComplete||this.loaded||(this.loaded=!0,this.onLoadComplete("Loaded")),this.startHeartBeatTimer()}},{key:"startHeartBeatTimer",value:function(){this.heartBeatTimer=setTimeout(this.checkPopup.bind(this),1e4)}},{key:"checkPopup",value:function(){var e=this;return this.isPopupStillOpen().then(function(t){t?e.startHeartBeatTimer():e.verificationComplete||e.handleVerificationComplete(un.default.windowClosedMessage)})}},{key:"isPopupStillOpen",value:function(){return this.postRobotClient||(this.postRobotClient=an.default.client({window:this.popupWindow,timeout:1e4})),this.postRobotClient.send(un.default.STILL_ALIVE_EVENT_NAME,{alive:1}).then(function(){return!0}).catch(function(e){return-1===e.toString().indexOf("window is closed")})}},{key:"handleKeepAlive",value:function(){"function"==typeof this.onKeepAlive&&this.onKeepAlive()}},{key:"handleVerificationComplete",value:function(e){this.verificationComplete=!0,this.heartBeatTimer=clearTimeout(this.heartBeatTimer),"function"==typeof this.onComplete&&this.onComplete(e.data),this.postRobotListener.cancel()}},{key:"handleError",value:function(){"function"==typeof this.onError&&this.onError()}},{key:"isIE11",get:function(){return!!window.MSInputMethodContext&&!!document.documentMode}}]),e}();rn.default=fn;var dn={};Object.defineProperty(dn,"__esModule",{value:!0});var ln=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),hn=yn(jt),pn=yn(rn),wn=yn(Ct),mn=yn(kt),gn=yn(Mt);function yn(e){return e&&e.__esModule?e:{default:e}}var vn=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),t&&(this.selector=t,console.warn("Deprecated: 'selector' argument in constructor is deprecated.\n                    Pass it as one of the properties in 'digitalId.init()' function")),this.DOCUMENT_TYPES=mn.default,this.CLAIM_TYPES=gn.default}return ln(e,[{key:"init",value:function(e){var t=e.onClick,n=e.onLoadComplete,r=e.onComplete,o=e.onKeepAlive,i=e.clientId,a=e.uxMode,u=e.buttonConfig,s=e.selector,c=e.action,f=e.experienceConfig,d=e.acrValues,l=e.claims;if(this.selector=this.selector||s||"#digitalid-verify, .digitalid-verify",!i)throw new Error("Digital iD :: error => No client_id specified");if(this.clientId=i,this.containers=document.querySelectorAll(this.selector),!this.containers||!this.containers.length)throw new Error("Digital iD :: error => No element with selector "+this.selector);var h=c?jt.ACTIONS[c]:jt.ACTIONS.idv;if(!h)throw new Error("Digital iD :: error => Invalid action specified ("+c+"). Valid values are: ("+Object.keys(jt.ACTIONS).join(" | ")+")");this.action=h,this.onClick=t,this.onComplete=r,this.onLoadComplete=n,this.onKeepAlive=o,this.uxMode=a||"popup",this.originUrl=location.origin,this.experienceConfig=f,this.setAcrValues(d),this.setClaims(l),this.render(this.action,u)}},{key:"setSessionToken",value:function(e){this.sessionToken=e}},{key:"setAcrValues",value:function(e){this.acrValues=e}},{key:"setClaims",value:function(e){this.claims=e}},{key:"render",value:function(e,t){for(var n=0;n<this.containers.length;n+=1){var r=this.doAction.bind(this),o=new hn.default(e,r,t);this.containers.item(n).appendChild(o)}}},{key:"doAction",value:function(){if(!this.clientId)throw new Error("Digital iD :: error => No client_id specified");var e=wn.default.getConfig().oauthUrl+"/authorize?response_mode=query&response_type=code&prompt=login&client_id="+this.clientId;if(this.experienceConfig&&(e+="&display_name="+this.experienceConfig.displayName+"&logo_uri="+this.experienceConfig.logoUri),"function"==typeof this.onClick){var t={};this.onClick(t),t.state&&(e+="&state="+t.state),t.evidenceToCapture&&this.checkUploadDocs(t)&&(this.context={evidence:t.evidence,evidenceToCapture:t.evidenceToCapture,desktopFlowEnabled:!!t.desktopFlowEnabled}),t.verificationSessionToken&&(this.sessionToken=t.verificationSessionToken),t.acrValues&&this.setAcrValues(t.acrValues),t.claims&&this.setClaims(t.claims)}this.originUrl&&(e+="&origin_url="+this.originUrl),this.sessionToken&&(e+="&session_token="+encodeURIComponent(this.sessionToken)),this.claims?e+="&claims="+encodeURIComponent(this.claims):this.acrValues&&(e+="&acr_values="+encodeURIComponent(this.acrValues)),e=encodeURI(e),"redirect"===this.uxMode?this.redirect(e):this.popup(e)}},{key:"popup",value:function(e){var t=window.screenX,n=window.screenY,r=document.documentElement.clientWidth/2-400+t,o=document.documentElement.clientHeight/2-371.5+n;this.launchPopup(e,800,743,o,r),this.messenger=this.createMessenger(),this.messenger.listen(this.popupWindow)}},{key:"createMessenger",value:function(){var e=this,t={onLoadComplete:this.onLoadComplete,onComplete:this.onComplete,onKeepAlive:this.onKeepAlive,getContext:function(){return e.context}};return new pn.default(t)}},{key:"launchPopup",value:function(e,t,n,r,o){var i="digitalid.clientid:"+this.clientId,a="scrollbars=yes, width="+t+", height="+n+", top="+r+", left="+o;this.popupWindow=window.open(e,i,a),this.popupWindow&&this.popupWindow.focus()}},{key:"redirect",value:function(e){window.location.href=e}},{key:"checkUploadDocs",value:function(e){var t=e.evidence,n=e.evidenceToCapture,r=Object.values(this.DOCUMENT_TYPES),o=!t||0===t.length||t.every(function(e){var t=e.object&&r.includes(e.object);if(!t)throw new Error(e.object+" is not a valid document type. window.digitalId.DOCUMENT_TYPES contains the valid values");return t}),i=Object.values(this.CLAIM_TYPES),a=n.every(function(e){var t=i.includes(e);if(!t)throw new Error(e+" is not a valid claim type. window.digitalId.CLAIM_TYPES contains the valid values");return t});return o&&a}}]),e}();dn.default=vn,window.digitalId=new vn,window.digitalIdAsyncInit&&"function"==typeof window.digitalIdAsyncInit&&window.digitalIdAsyncInit()}();