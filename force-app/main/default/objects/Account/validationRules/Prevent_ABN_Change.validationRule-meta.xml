<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Prevent_ABN_Change</fullName>
    <active>true</active>
    <description>Prevent ABN Change on Organisation with Active License and when the Licence Status is “Active”, “Suspended with fees”, “Suspended without fees”.</description>
    <errorConditionFormula>AND(
    ISCHANGED( ABN__c ),
    OR(
        RecordType.DeveloperName = &quot;Licence&quot;,
        RecordType.DeveloperName = &quot;Licence_CMA&quot;,
        RecordType.DeveloperName = &quot;Licence_CPA&quot;
    ),
    OR(
        ISPICKVAL(Licence_Status__c, &quot;Active&quot;),
        ISPICKVAL(Licence_Status__c, &quot;Suspended With Fees&quot;),
        ISPICKVAL(Licence_Status__c, &quot;Suspended Without Fees&quot;)
    )
)</errorConditionFormula>
    <errorDisplayField>ABN__c</errorDisplayField>
    <errorMessage>You cannot change the ABN on an organisation with an active licence. Please create a new licence instead.</errorMessage>
</ValidationRule>
