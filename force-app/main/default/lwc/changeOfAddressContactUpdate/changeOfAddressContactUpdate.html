<!--
-->
<template>
    <lightning-card>
		<div class="titlestyle"><h1 slot="title" class="titlestyle">{title}</h1></div>
        
		<template lwc:if={error}>
			<div class="slds-text-title_bold errorcolor">{error}</div>
		</template>
		<!--Layout to display the changed address and previous address-->
		<lightning-layout multiple-rows>
			<template lwc:if={isBillingAddressChanged}>
				<lightning-layout-item size="6" padding="around-small">
					<div class="slds-text-title_bold">
						Billing Address Change
					</div><br/>
					<div>
						Current Address: {orgRecord}
					</div>
					<div>
						New Address: {newBillingAddress}
					</div>
				</lightning-layout-item>
			</template>
			<template lwc:if={isPhysicalAddressChanged}>
				<lightning-layout-item size="6" padding="around-small">
					<div class="slds-text-title_bold">
						Physical Address Change
					</div><br/>
					<div>
						Current Address: {orgRecord}
					</div>
					<div>
						New Address:  {newPhysicalAddress}
					</div>
				</lightning-layout-item>
			</template>
		</lightning-layout>
		<!--Accordion to display the contact selection table and the selected contacts table-->
		<lightning-accordion active-section-name="A">
			<lightning-accordion-section name="A" label="Contacts">
				<!--Layout to display the search input and button-->
				<lightning-layout multiple-rows>
					<lightning-layout-item size="7" padding="around-small">
						<p class="paddingforparagraps">{selecteddata.length} selected</p>
					</lightning-layout-item>
					<lightning-layout-item size="2" padding="around-small">
						<template lwc:if={searchKey}>
							<p class="paddingforparagraps righttextalignforparagraps">{data.length} of {searchedRecords.length}</p>
						</template>
						<template lwc:else>
							<p class="paddingforparagraps righttextalignforparagraps">{data.length} of {fulldataset.length}</p>
						</template>
					</lightning-layout-item>
					<lightning-layout-item size="3" padding="around-small">
						<lightning-input class="slds-m-right_x-small" type="search" placeholder="Search contacts" autocomplete="off" onchange={handleSearchText}></lightning-input>
					</lightning-layout-item>   
				</lightning-layout>
				<lightning-layout> 
					<lightning-layout-item  padding="around-small">
						<template lwc:if={errorMoreThan50}>
							<div class="slds-text-title_bold errorcolor">{errorMoreThan50}</div>
						</template>
					</lightning-layout-item>	
				</lightning-layout>
				<lightning-layout multiple-rows>
					<lightning-layout-item size="12">
						<div class="slds-border_top" style="height:400px">
							<lightning-datatable key-field="Id" data={data} columns={columns} load-more-offset="20"
								onloadmore={handleLoadMore} enable-infinite-loading={enableInfinteLoading} show-checkbox-column hide-row-number-column
								onrowselection={handleRowSelection}>
							</lightning-datatable>
						</div>
						{loadMoreStatus}	
					</lightning-layout-item>	
				</lightning-layout>
			</lightning-accordion-section>
			<lightning-accordion-section name="B" label="Selected Contacts">
				<lightning-layout>
					<lightning-layout-item size="12" padding="around-small">
						<div class="slds-border_top" style="height:400px">
							<lightning-datatable key-field="Id" data={selecteddata} columns={columns} load-more-offset="20"
								onloadmore={handleLoadMoreselected} enable-infinite-loading={enableInfinteLoadingSelected} show-row-number-column hide-checkbox-column >
							</lightning-datatable>
						</div>
					</lightning-layout-item>
				</lightning-layout>
				
			</lightning-accordion-section>
		</lightning-accordion>
		<!--Navigation Buttons -->
		<div align="center">
			<lightning-button  label="Cancel" onclick={handleCancel} class="slds-button slds-padding-around-small" ></lightning-button>
			<lightning-button  label="Back" onclick={handleBack} class="slds-button slds-padding-around-small"></lightning-button>
			<lightning-button  label="Next" onclick={handleNext} class="slds-button slds-padding-around-small"></lightning-button>  
		</div>
        
    </lightning-card>
</template>