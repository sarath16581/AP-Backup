<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <outboundMessages>
        <fullName>Message4OutboundEmailMessage</fullName>
        <apiVersion>31.0</apiVersion>
        <endpointUrl>https://salesforce-bw-stest.npe.auspost.com.au:10543/Services/CustomerEnquiryManagement/addCaseEmail</endpointUrl>
        <fields>ActivityId__c</fields>
        <fields>BccAddress__c</fields>
        <fields>CcAddress__c</fields>
        <fields>CreatedById</fields>
        <fields>CreatedDate</fields>
        <fields>EmailId__c</fields>
        <fields>FromAddress__c</fields>
        <fields>FromName__c</fields>
        <fields>HasAttachment__c</fields>
        <fields>Headers__c</fields>
        <fields>HtmlBody__c</fields>
        <fields>Id</fields>
        <fields>Incoming__c</fields>
        <fields>IsDeleted</fields>
        <fields>LastActivityDate</fields>
        <fields>LastModifiedById</fields>
        <fields>LastModifiedDate</fields>
        <fields>MessageDate__c</fields>
        <fields>Name</fields>
        <fields>OwnerId</fields>
        <fields>ParentId__c</fields>
        <fields>ReplyToEmailMessageId__c</fields>
        <fields>Status__c</fields>
        <fields>Subject__c</fields>
        <fields>SystemModstamp</fields>
        <fields>TextBody__c</fields>
        <fields>ToAddress__c</fields>
        <includeSessionId>true</includeSessionId>
        <integrationUser>apintegrationuser@auspost.com.au</integrationUser>
        <name>Message4OutboundEmailMessage</name>
        <protected>false</protected>
        <useDeadLetterQueue>true</useDeadLetterQueue>
    </outboundMessages>
    <rules>
        <fullName>SSSW New Outbound Email Message</fullName>
        <actions>
            <name>Message4OutboundEmailMessage</name>
            <type>OutboundMessage</type>
        </actions>
        <active>true</active>
        <formula>((NOT(CONTAINS(CreatedBy.Username, &apos;salessystemssupport@auspost.com.au&apos;)) &amp;&amp; NOT(Incoming__c)) || Incoming__c)</formula>
        <triggerType>onCreateOnly</triggerType>
    </rules>
</Workflow>
