<apex:page docType="html-5.0" standardController="Route_Template__c" extensions="TDF_DutyTemplatePrintControllerY" renderAs="pdf" applyBodyTag="false">
<!--Page to allow printing of Duty for driver a backup to the mobile device -->
<!--Uses controller extension to retreive data. Controller required to retreive long field and allow sort on Day Start Time-->  
<!--Created 08-10-18 Andrew Judd-->  
    <head>
        <style type="text/css" media="print">
            @page {
                size: A4;
                margin-top: 50px;
                margin-bottom: 20px;
                margin-right: 20px;
                margin-left: 20px;
                

                @top-left {
                    content: element(headerleft);
                }
                @top-right {
                    content: element(headerright);
                }
                @top-center {
                    content: element(headercenter);
                }
                
                @bottom-center {
                    content: element(footer);
                }
                
            }
            div.headerleft {
                padding: 11px;
                width:100px;
                position: running(headerleft);
            }
            div.headercenter {
                padding: 5px;
                position: running(headercenter);
            }
            div.headerright {
                padding: 5px;
                padding-right: 0px;
                position: running(headerright);
            }
            div.footer {
                padding: 5px;
                position: running(footer);
            }
            .pagenumber:before {
                content: counter(page);
            }
            .pagecount:before {
                content: counter(pages);
            }
            .headerStyle {
                font-size: 10pt;
                font-family: "Arial Unicode MS";
                padding-left: 5px;
                padding-top: 5px;
                border-bottom: 1px solid black;
            }
            .boldcell {
                font-size: 10pt;
                font-weight: bold; 
                font-family: sans-serif; 
                vertical-align: Top;
                padding-left: 5px;
                padding-top: 5px;
            }
            .normalcell {
                font-size: 10pt;
                font-family: "Arial Unicode MS";
                vertical-align: Top;
                padding-left: 5px;
                padding-top: 5px;
            }
            .bold{ 
                font-weight: bold; 
                font-family: sans-serif; 
            }
        </style>
    </head>
    <div class="headerleft">
        <img src="{!$Resource.auspost_logo}" width="100%"/>
    </div> 
    <div class="headercenter">
        <apex:pageBlock id="dt-list" >
            <table style="font-size:10pt;font-family:Arial Unicode MS;" width="100%">
                <tr>
                    <td class="bold">Duty  &nbsp; <apex:outputField value="{! Route_Template__c.Name}"/></td>
                    <td class="bold" style="text-decoration:underline !important;text-align:right;">
                        <apex:outputField value="{! Route_Template__c.Service_Territory__r.Name}"/>
                    </td>
                    <td width="30px"></td>
                    <td width="20%">Page</td>
                </tr> 
                <tr>
                    <td>Effective Date: <apex:outputField value="{! Route_Template__c.Effective_Date__c}"/></td>
                    <td>Expiry Date: <apex:outputField value="{! Route_Template__c.Expiry_Date__c}"/></td>
                    <td></td>
                    <td>Printed Date:</td>
                </tr>
            </table>
        </apex:pageBlock>
    </div>
    <div class="headerright">
        <table style="font-size:10pt;font-family:Arial Unicode MS;width=600px">
            <tr>
                <td align="right"><span class="pagenumber"/> of <span class="pagecount"/></td>
            </tr> 
            <tr>
                
                <td align="right"> 
                    <apex:outputText value="{0, date, d MMM yyyy}">
                        <apex:param value="{!NOW()}" />
                    </apex:outputText>
                </td>
            </tr>
        </table>
    </div>
    <div class="footer">
    </div>
    <div class="content">  
        <!--DT Block-->
        <div> 
            <apex:pageBlock >
                <table style="width:100%;">
                    <tr>
                        <td style="font-size:10pt;font-style:italic;border-top: 1px solid black;">
                        </td>
                    </tr>
                    <tr>
                        <td style="font-size:10pt;font-style:italic;">
                            <apex:outputText value="{!$Label.TDF_CustomLabel_PTO}"/>
                        </td>
                    </tr>
                    <tr>
                        <td style="font-size:10pt;font-style:italic;">
                            <apex:outputText value="{!$Label.TDF_CustomLabel_T2}"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="bold" style="font-size:10pt;border-bottom: 1px solid black;">
                            <apex:pageBlockTable style="width:100%;" value="{! breakList }" var="bt">
                                <apex:column value="{! bt.active}" width="200px" />
                                <apex:column value="{! bt.activity}: {! bt.location} {! bt.breakTime}" style="text-align:right !important;"/>
                            </apex:pageBlockTable>
                        </td>
                    </tr>
                </table>
                <div style="font-size:10pt;font-family:Arial Unicode MS;width:100%;">
                    <center>
                        <apex:outputField value="{! Route_Template__c.Active_Route_Days__c}"/>
                        &nbsp; <apex:outputText value="{!startTime}"/>
                        - &nbsp; <apex:outputText value="{!endTime}"/>
                    </center> 
                </div>
            </apex:pageBlock>
        </div>
        <!--DT Block End-->     
        <!--JT Block--> 
        <div>
            <apex:pageBlock >  
                <apex:pageBlockTable width="100%" headerClass="headerStyle" value="{! jobTemplateList }" var="jt">
                    <apex:column styleClass="boldcell" headerValue="Arrive" value="{! jt.arrive}" width="50px" rowspan="3" />
                    <apex:column styleClass="boldcell" value="{! jt.location } ({! jt.address })" headerValue="Job Details" rowspan="1"/>
                    <apex:column styleClass="boldcell" headerValue="Docks" value="{! jt.docks }" width="25px" rowspan="1"/>
                    <apex:column styleClass="boldcell" headerValue="Depart" value="{! jt.depart }" width="50px"  rowspan="1"/>
                    <apex:column value="{! jt.activity }" rowspan="1" colspan="3" style="font-size:10pt;font-family:Arial Unicode MS;vertical-align:Top;padding-left:5px;padding-top:5px;" breakBefore="true"/>
                    <apex:column headerValue="Job and Site Instructions" style="font-size:9pt;font-family:Arial Unicode MS;vertical-align:Top;padding-left:30px;padding-top:5px;padding-bottom:5px;" rowspan="1" colspan="3" breakBefore="true">
                        <apex:outputField value="{!jt.jt.Job_Instructions__c}"/> 
                        <apex:outputField value="{!jt.jt.Location__r.Site_Instruction_Notes__c}"/>
                        <apex:outputField value="{!jt.jt.Location__r.Site_Instructions__c}"/>
                    </apex:column> 
                </apex:pageBlockTable>
            </apex:pageBlock>
        <!--JT Block End-->
        </div>
    </div>
</apex:page>