<!--
    @Author      :  Snigdha.Sahu@auspost.com.au
    @Name        :  RetailSMBKnowledgeEmail
    @Date        :  10/05/2016
    @Description :  Open Knowledge PDF and Email to SMB customers. 
-->

<apex:page showHeader="false" standardStylesheets="false" sidebar="false" title="Retail SMB" docType="html-5.0" applyHtmlTag="false" applyBodyTag="false" id="DisplayPDF" controller="RetailSMBEmailHelper">
    <html lang="en">
        <head>
            <meta charset="utf-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
            <title>Retail Business Customers</title>
            <!-- <link rel="shortcut icon" href="{!URLFOR($Resource.RetailSMB,'RetailSMB/images/favicon.ico')}" /> -->
            <link rel="stylesheet" href="{!URLFOR($Resource.RetailSMBcss,'consumer-styles.css')}"/>
            <link rel="stylesheet" href="{!URLFOR($Resource.RetailSMBcss,'app.css')}"/>            
            <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
            <apex:stylesheet value="{!$Resource.jQueryLayoutCSS}" />    

        </head>
        
        <style type="text/css">            
                body {

                }                
                .background  {
                    
                    color: #050001;
                    font-family: Verdana, Helvetica, Arial, sans-serif;                    
                    padding: 10px;
                    position: relative;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    z-index: 1; 
                    position: relative;                   
                    
                 }
                 .background:before{
                    
                    color: #050001; 
                    font-family: Verdana, Helvetica, Arial, sans-serif;                   
                    padding: 10px;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-image: url({!URLFOR($Resource.RetailSMBimg, 'Background.png')});
                    background-repeat: round;
                    background-attachment: fixed;
                    background-size: 100%;                    
                    position: absolute;
                    content: "";
                    z-index: -1;                
                    
                 }
                 .h1 {
                    color:#372E2C;
                    font:bold 45px/45px 'letterbold', Arial, Helvetica, sans-serif; 
                    margin:0 0 15px;
                 }                    

                .formKA {                    
                    -moz-border-radius: 5px;
                    -webkit-border-radius: 5px;
                    border-radius: 5px;
                    padding: 5px;
                    width: 80%;
                    height:70%;
                    margin-left: 10%; 
                    margin-top: 5%; 
                                
                    
                }
                .displayPDF{
                    margin-left:22%;  
               
                }
                .formKAbutton {
                    background: #CC0000;
                    border: none;
                    color: #ffffff;
                    display: block;                    
                    letter-spacing: 1px;
                    margin-top: 50px;
                    padding: 7px 25px;
                    text-shadow: 0 1px 1px #000000;
                    height:70%;
                    width:400px;                    
                    font-size: large;
                    font-weight: bold;
 
                    
                }
                .formKAfieldset {
                    border: none;
                    margin-bottom: 5px;
                                        
                }

                .formKAinput {
                    background: #ffffff;
                    border-color: #A3A0A0;
                    border-style: solid;
                    border-width: 2px;                    
                    outline: none;
                    padding: 10px;
                    width: 400px;
                    text-align : left;                    
                    float: left;
                    height:65%;
                    
                }
                .formKAlabel {                    
                    font-size: 14px;
                    width: 110px;
                    color: #242222;
                    margin: auto;
                }
                
                .formMessagelegend {
                    color: #CC0000;
                    font-size: 16px;
                    font-weight: bold;
                    padding-bottom: 10px;
                    text-shadow: 0 1px 1px #E0C3C3;
                    width: 400px;
                }
                .hidden{display: none;}
                .shown {display:block;}

                
                .waitingHolder {
                    background-color: #dc1928;
                    float : center;   
                    z-index: 9999;
                    padding: 19px 0px 19px 24px;
                    position: absolute;
                    border-radius: 6px;
                    width: 20%;
                    top: 40%;
                    -moz-box-shadow: 3px 3px 5px #888888;
                    -webkit-box-shadow: 3px 3px 5px #888888;
                    box-shadow: 3px 3px 5px #888888;
                }
               
                .waitingDescription { 
                    border: none;
                    color: #dc1928;
                    display: block;                    
                    letter-spacing: 1px;
                    float : right;
                    padding: 10px;
                    text-shadow: 0 1px 1px #000000;
                    font-size: large;
                    font-weight: bold;
                }
                
                @media only screen 
                and (min-device-width : 768px) 
                and (max-device-width : 1024px) 
                and (orientation : portrait){
                
                .background  {                    
                    color: #050001;
                    font-family: Verdana, Helvetica, Arial, sans-serif;
                    padding: 10px;
                    position: relative;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    z-index: 1; 
                    position: relative;                  
                    
                 }
                 .background:before{
                    
                    color: #050001;
                    font-family: Verdana, Helvetica, Arial, sans-serif;
                    padding: 10px;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-image: url({!URLFOR($Resource.RetailSMBimg, 'BackgroundPortrait.png')});
                    background-repeat: round;
                    background-attachment: fixed;
                    background-size: 100%;                    
                    position: absolute;
                    content: "";
                    z-index: -1;   
                    
                    }
                    
                    .formKA{                    
                     margin-top : 20%;                    
                    }                      
                                  
                }
                
        </style>
        <script type="text/javascript"> 
              function OnLoad()
                 {
                     document.getElementById('emailerror').style.display = 'none';                     
                 }
                     
              
        </script> 
        
        <body class="background" onload="OnLoad()">              
               <div class="h1">
               <div style="float:left; ">
                   <a href="{!$Site.Prefix}/apex/RetailSMB">
                            <img src="{!URLFOR($Resource.RetailSMBimg,'home_ap.png')}" height="60px" width="60px" ></img>
                   </a>
               </div>                
                &nbsp;Helpful Guides
                <div style="float:right">
                    <a href="{!$Site.Prefix}/apex/RetailSMB">
                        <img src="{!URLFOR($Resource.RetailSMBimg,'AP_PrimaryLogo.png')}" height="60px" width="60px" ></img>
                    </a>
                </div>
           </div>              
                 <apex:form id="formKA" styleClass="formKA"  >              
                   <div id="displayPdf" class="displayPDF" >                                        
                       <!-- <object data="{!$CurrentPage.parameters.fileparam}" type="application/pdf" width="100%" height="100%" >
                            alt : <a href="{!$CurrentPage.parameters.fileparam}">SMB.pdf</a>
                       </object> -->
                        <img src="{!$CurrentPage.parameters.picture}" width="400px" />                    
                        <apex:inputText value="{!email}" id="email" styleClass="formKAinput" html-placeholder="Customer Email Address"  style="font-size: large;" onblur="return checkEmail();"  />
                        <div id="emailerror" class="formMessagelegend">Please enter a valid email address</div>
                        <br></br>
                        <div>
                            <apex:commandButton value="Send email" action="{!sendEmail}" styleClass="formKAbutton" status="actStatusId" rerender="email, msg" oncomplete="return blankEmail();" />            
                            <apex:actionStatus id="actStatusId"  style="align:center;">
                                 <apex:facet name="start" >
                                     <img src="/img/loading.gif"  height="40" width="40"/>
                            </apex:facet>                                             
                            </apex:actionStatus> 
                        </div>
                        <apex:outputPanel id="msg" styleclass="formMessagelegend">                
                              <apex:pageMessages id="showmsg" ></apex:pageMessages>         
                        </apex:outputPanel>      
                                                                
                    </div>                    
                 </apex:form>
                 
                 
                 <script type="text/javascript">
                     function checkEmail() {
                         var emailFormat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/
                         var emailEntered = document.getElementById('{!$Component.formKA.email}');
                            if (emailFormat.test(emailEntered.value) == false) {
                                    document.getElementById('emailerror').style.display = 'block';                                                    
                                emailEntered.focus();                                
                                return false;                                
                            }
                            else
                            {                             
                                    document.getElementById('emailerror').style.display = 'none';  
                                    return true;
                            }                    
                    }
                    
                    function blankEmail() {
                        document.getElementById('{!$Component.formKA.email}').value = ''; 
                        return true;                       
                    
                    }
                </script>    
         </body>
           
    </html>
</apex:page>