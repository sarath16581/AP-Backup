<aura:component controller="ServiceNow_ChooseTemplateApexController">
    <aura:attribute name="rtypeList" type="ServiceNow_ChooseTemplateApexController.templateWrapper[]"/>
    <aura:attribute name="openModal" type="boolean" default="false"/>
    <aura:attribute name="selectedTemplatedId" type="string"/>
    <aura:attribute name="showError" type="boolean" default="false"/>
    <aura:attribute name="objectName" type="String"/>
    <aura:attribute name="templateSelected" type="boolean" default="true"/>

    <aura:handler name="init" value="{!this}" action="{!c.onLoad}"/>

    <lightning:card>
        <aura:set attribute="title">
            <lightning:icon iconName="standard:template" size="small"/> &nbsp;&nbsp;Select Template
        </aura:set>
        <aura:set attribute="actions">
            <lightning:button onclick="{!c.selectTemplate}" label="Load" iconName="standard:product_request_line_item" />
        </aura:set>
        <div class="slds-p-horizontal_small">
            <div class="slds-form slds-form_stacked">
                <div class="slds-form-element" id="formElement">
                    <label class="slds-form-element__label" for="templateSelect"><abbr class="slds-required" title="required">*</abbr>Select Template</label>
                    <select onchange="{!c.chooseValue}" class="slds-select" Id="templateSelect">
                        <option value="null">--None--</option>
                        <aura:iteration items="{!v.rtypeList}" var="rtype">
                            <!--<optgroup label="{!rtype.recordTypeName}">-->
                                <aura:iteration items="{!rtype.templateinnerWrapList}" var="template">
                                    <option data-value="{!template.templateId}" value="{!template.templateId}">{!template.templateName}</option>
                                </aura:iteration>
                            <!-- </optgroup> -->
                        </aura:iteration>
                    </select>
                    <aura:if isTrue="{!v.showError}">
                        <div class="slds-form-element__help" id="error-02">Please choose a template</div>
                    </aura:if>
                </div>
            </div>
        </div>
    </lightning:card>

    <aura:if isTrue="{!v.templateSelected}">
        <c:ServiceNow_CreatePage2 templateId="{!v.selectedTemplatedId}" isNewRecord="true" objectName="{!v.objectName}"/>    	
    </aura:if>
</aura:component>